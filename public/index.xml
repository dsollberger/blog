<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>The Median Data Scientist on The Median Data Scientist</title>
    <link>/</link>
    <description>Recent content in The Median Data Scientist on The Median Data Scientist</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2018</copyright>
    <lastBuildDate>Wed, 20 Apr 2016 00:00:00 +0000</lastBuildDate>
    <atom:link href="/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Fall Plans for American Universities</title>
      <link>/post/fall-plans-for-american-universities/</link>
      <pubDate>Sat, 13 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/fall-plans-for-american-universities/</guid>
      <description>&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;p&gt;Today’s coding practice is based on the following article and data source (there is literally a “Get the Data” link):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.chronicle.com/article/Here-s-a-List-of-Colleges-/248626&#34;&gt;Here’s a List of Colleges’ Plans for Reopening in the Fall&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(&amp;quot;geofacet&amp;quot;)
library(&amp;quot;rvest&amp;quot;)
library(&amp;quot;tidyverse&amp;quot;)

# load data
df_raw &amp;lt;- read_csv(&amp;quot;data-w8lLG.csv&amp;quot;)
colnames(df_raw)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Institution&amp;quot; &amp;quot;Control&amp;quot;     &amp;quot;State&amp;quot;       &amp;quot;Category&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;data-wrangling&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data Wrangling&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# filter out Excel artifacts (trivial, empty rows)
df &amp;lt;- df_raw %&amp;gt;%
  filter(Institution != &amp;quot;#REF!&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#States as factors
states_alphabetically &amp;lt;- sort(unique(df$State))
df$State_factor &amp;lt;- factor(df$State,
                          levels = states_alphabetically)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#extracting text from urls (rvest!!)
df$Category_simple &amp;lt;- rep(NA, nrow(df))
for(i in 1:nrow(df)){
  if(str_detect(df$Category[i], pattern = &amp;quot;&amp;lt;a&amp;quot;)){
    df$Category_simple[i] &amp;lt;- html_text(read_html(df$Category[i]))
  }
  else{
    df$Category_simple[i] &amp;lt;- df$Category[i]
  }
}

table(df$Category_simple)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
##                                  Considering a range of scenarios 
##                                1                               69 
##                             Link           Planning for in-person 
##                               11                              456 
##              Planning for online         Proposing a hybrid model 
##                               68                               78 
##                Waiting to decide 
##                               45&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;states-represented&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;States Represented&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;%
  ggplot(aes(x = fct_rev(State_factor))) + #note use of reversing the factor order
  geom_bar(stat = &amp;quot;count&amp;quot;) +
  coord_flip()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-13-fall-plans-for-american-universities_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;states-map&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;States Map&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;main_plot &amp;lt;- df %&amp;gt;%
  filter(Category_simple %in% 
           c(&amp;quot;Planning for in-person&amp;quot;, &amp;quot;Planning for online&amp;quot;,
             &amp;quot;Proposing a hybrid model&amp;quot;, &amp;quot;Waiting to decide&amp;quot;)) %&amp;gt;%
  ggplot(aes(x = Category_simple)) +
  geom_bar(aes(fill = Category_simple), stat = &amp;quot;count&amp;quot;) +
  labs(title = &amp;quot;Fall Plans for American Universities&amp;quot;,
       subtitle = &amp;quot;(as of June 12, 2020)&amp;quot;,
       caption = &amp;quot;Data Source: Chronicle of Higher Education&amp;quot;,
       x = &amp;quot;&amp;quot;,
       y = &amp;quot;&amp;quot;) +
  scale_x_discrete(name = &amp;quot;&amp;quot;,
                   labels = c(&amp;quot;in-person&amp;quot;, &amp;quot;online&amp;quot;, &amp;quot;hybrid&amp;quot;, &amp;quot;TBA&amp;quot;)) +
  scale_fill_discrete(name = &amp;quot;Fall Plans&amp;quot;) +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
  facet_geo(~State, grid = &amp;quot;us_state_grid2&amp;quot;, scales = &amp;quot;free_y&amp;quot;)

main_plot +
  theme(legend.position = &amp;quot;none&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-13-fall-plans-for-american-universities_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R Installation (Summer 2020)</title>
      <link>/post/r-installation-summer-2020/</link>
      <pubDate>Wed, 03 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/r-installation-summer-2020/</guid>
      <description>&lt;p&gt;If you are planning to do the &lt;code&gt;R&lt;/code&gt; assignments on your own computer (recommended), then here is a quick outline for obtaining the software.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;There are two separate software programs&lt;/em&gt;. Most people find it easier to use &lt;code&gt;RStudio&lt;/code&gt;. than just &lt;code&gt;R&lt;/code&gt;, but you need to install &lt;code&gt;R&lt;/code&gt; first before installing &lt;code&gt;RStudio&lt;/code&gt; (analogously speaking: you need an cell phone before you can use an cell phone case).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;If you have R and RStudio from a previous course, you still need to update to the current versions!&lt;/em&gt; (version 4.0.0 of R and version 1.3.959 of RStudio)&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;downloading-r&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Downloading R&lt;/h1&gt;
&lt;p&gt;Go to &lt;a href=&#34;https://cran.r-project.org/&#34;&gt;The Comprehensive R Archive Network&lt;/a&gt; (CRAN)&lt;/p&gt;
&lt;p&gt;Windows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;click “Download R for Windows”&lt;/li&gt;
&lt;li&gt;click “install R for the first time”&lt;/li&gt;
&lt;li&gt;click “Download R 4.0.0 for Windows”&lt;/li&gt;
&lt;li&gt;click “Save File”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mac:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;click “Download R for (Mac) OS X”&lt;/li&gt;
&lt;li&gt;click “R-4.0.0.pkg”&lt;/li&gt;
&lt;li&gt;click “Ok”&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;installing-r&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Installing R&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Windows: double-check icon for R-4.0.0-win.exe&lt;/li&gt;
&lt;li&gt;Mac: double-click icon for R-4.0.0.pkg&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For the rest of these steps, it is okay to accept the default selections (but I will outline them here for posterity):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;give computer permission to install&lt;/li&gt;
&lt;li&gt;select language&lt;/li&gt;
&lt;li&gt;agree to GNU General Public License&lt;/li&gt;
&lt;li&gt;select destination location&lt;/li&gt;
&lt;li&gt;select components&lt;/li&gt;
&lt;li&gt;Startup options: select “No (accept defaults)”&lt;/li&gt;
&lt;li&gt;select Start Menu Folder&lt;/li&gt;
&lt;li&gt;select Additional Tasks&lt;/li&gt;
&lt;li&gt;(wait a minute or two for installation to take place)&lt;/li&gt;
&lt;li&gt;“Click Finish to exit Setup”&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;downloading-rstudio&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Downloading RStudio&lt;/h1&gt;
&lt;p&gt;Go to the &lt;a href=&#34;https://rstudio.com/products/rstudio/download/#download&#34;&gt;RStudio Desktop download page&lt;/a&gt; (i.e. we are using the &lt;em&gt;free&lt;/em&gt;, desktop version of RStudio)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Windows: click RStudio-1.3.959.exe, click “Save File”&lt;/li&gt;
&lt;li&gt;Mac: click RStudio-1.3.959.dmg, click “Ok”&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;installing-rstudio&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Installing RStudio&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Windows: double-check icon for RStudio-1.3.959.exe&lt;/li&gt;
&lt;li&gt;Mac: double-click icon for RStudio-1.3.959.dmg&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For the rest of these steps, it is okay to accept the default selections (but I will outline them here for posterity):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;give computer permission to install&lt;/li&gt;
&lt;li&gt;“Click Next to continue”&lt;/li&gt;
&lt;li&gt;Choose Install Location&lt;/li&gt;
&lt;li&gt;Choose Start Menu Folder&lt;/li&gt;
&lt;li&gt;(wait a minute or two for installation to take place)&lt;/li&gt;
&lt;li&gt;“Click Finish to close Setup”&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;code-packages&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Code Packages&lt;/h1&gt;
&lt;p&gt;For R coding, we will often need more code—called code packages. To ease our coding sessions, please run the following lines of code before class (in the lower-left &lt;code&gt;console&lt;/code&gt; area of RStudio, just has to be done once this semester).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;package_list &amp;lt;- c(&amp;quot;tidyverse&amp;quot;, &amp;quot;readxl&amp;quot;, &amp;quot;mosaic&amp;quot;, &amp;quot;titanic&amp;quot;)
install.packages(package_list)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;file-types&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;File Types&lt;/h1&gt;
&lt;p&gt;Also, while we are learning how I want homework assignments to be submitted, it will be useful if you can see file types in your computer.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;instructions for &lt;a href=&#34;http://kb.winzip.com/kb/entry/26/&#34;&gt;Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;instructions for &lt;a href=&#34;https://www.idownloadblog.com/2014/10/29/how-to-show-or-hide-filename-extensions-in-os-x-yosemite/&#34;&gt;Mac OS X&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Geofacet plot vingette</title>
      <link>/post/geofacet-plot-vingette/</link>
      <pubDate>Sat, 30 May 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/geofacet-plot-vingette/</guid>
      <description>&lt;p&gt;Today I am going to try to make a &lt;code&gt;geofacet&lt;/code&gt; graph using the GAI (Global Acceptability Index) data. My goal is to show trends in LGBT acceptance in Europe between the years 2003 and 2017.&lt;/p&gt;
&lt;div id=&#34;sources-and-tools&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Sources and tools&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://williamsinstitute.law.ucla.edu/publications/global-acceptance-index-lgbt/&#34;&gt;Social Acceptance of LGBT People in 174 Countries&lt;/a&gt; publication from the UCLA School of Law Williams Institute&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://hafen.github.io/geofacet/&#34;&gt;geofacet&lt;/a&gt; &lt;code&gt;R&lt;/code&gt; package&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.downloadexcelfiles.com/wo_en/download-excel-file-list-european-countries-worldwo#.XtKec8B7mUk&#34;&gt;List of European nations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://convert.town/column-to-comma-separated-list&#34;&gt;Convert Town&lt;/a&gt; to convert spreadsheet columns to comma-separated lists&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(&amp;quot;geofacet&amp;quot;)
library(&amp;quot;tidyverse&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;data&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;raw_data &amp;lt;- read_csv(&amp;quot;gai.csv&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I did some quick data wrangling in Excel before loading the file. Since the data publication emphasized ranking the countries, the data currently looks like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;head(raw_data)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 6 x 8
##   country     gai2003 country_1   gai2008 country_2   gai2013 country_3  gai2017
##   &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;  
## 1 Netherlands 6.8     Netherlands 7.2     Iceland     8.4     Iceland    8.9    
## 2 Sweden      6.7     Sweden      7.1     Netherlands 7.9     Netherlan~ 8.6    
## 3 Denmark     6.7     Iceland     7.1     Spain       7.4     Norway     8.2    
## 4 Iceland     6.3     Uruguay     6.6     Canada      7.4     Canada     8.2    
## 5 Switzerland 6.2     Canada      6.5     Sweden      7.4     Spain      8.1    
## 6 Norway      6.2     Denmark     6.5     Norway      7.3     Belgium    7.9&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I wish to have more tidy data. My desired format is&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;input: year&lt;/li&gt;
&lt;li&gt;output: GAI&lt;/li&gt;
&lt;li&gt;group: country&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# focus on one year at a time
df2003 &amp;lt;- raw_data %&amp;gt;% select(country, gai2003) %&amp;gt;% mutate(year = 2003)
df2008 &amp;lt;- raw_data %&amp;gt;% select(country_1, gai2008) %&amp;gt;% mutate(year = 2008)
df2013 &amp;lt;- raw_data %&amp;gt;% select(country_2, gai2013) %&amp;gt;% mutate(year = 2013)
df2017 &amp;lt;- raw_data %&amp;gt;% select(country_3, gai2017) %&amp;gt;% mutate(year = 2017) 

# use same column names (to prepare to row-bind)
colnames(df2003) &amp;lt;- c(&amp;quot;country&amp;quot;, &amp;quot;gai&amp;quot;, &amp;quot;year&amp;quot;)
colnames(df2008) &amp;lt;- c(&amp;quot;country&amp;quot;, &amp;quot;gai&amp;quot;, &amp;quot;year&amp;quot;)
colnames(df2013) &amp;lt;- c(&amp;quot;country&amp;quot;, &amp;quot;gai&amp;quot;, &amp;quot;year&amp;quot;)
colnames(df2017) &amp;lt;- c(&amp;quot;country&amp;quot;, &amp;quot;gai&amp;quot;, &amp;quot;year&amp;quot;)

# row bind the data frames into one data frame
all_data &amp;lt;- rbind(df2003, df2008, df2013, df2017)

# convert column from character to numeric type
all_data$gai &amp;lt;- as.numeric(all_data$gai)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: NAs introduced by coercion&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# take a look at what we have at the moment
head(all_data)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 6 x 3
##   country       gai  year
##   &amp;lt;chr&amp;gt;       &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
## 1 Netherlands   6.8  2003
## 2 Sweden        6.7  2003
## 3 Denmark       6.7  2003
## 4 Iceland       6.3  2003
## 5 Switzerland   6.2  2003
## 6 Norway        6.2  2003&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;map&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Map&lt;/h1&gt;
&lt;p&gt;Before we try out the &lt;code&gt;geofacet&lt;/code&gt; tech, let us make sure that this data is amenable to &lt;code&gt;ggplot&lt;/code&gt; in the first place&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;all_data %&amp;gt;%
  ggplot(aes(x = year, y = gai, color = country, group = country)) +
  geom_line() +
  labs(title = &amp;quot;Acceptance of LGBT People&amp;quot;,
       subtitle = &amp;quot;by country&amp;quot;,
       caption = &amp;quot;Data Source: Williams Institute at UCLA&amp;quot;,
       x = &amp;quot;Year&amp;quot;,
       y = &amp;quot;Global Acceptability Index&amp;quot;) +
  theme(legend.position = &amp;quot;none&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-30-geofacet-plot-vingette_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;As you can imagine, keeping track of and labeling 176 countries is quite cumbersome.&lt;/p&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;europe&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Europe&lt;/h1&gt;
&lt;p&gt;Instead, today we will focus on the European nations and use the &lt;code&gt;geofacet&lt;/code&gt; package to clearly label the countries (with an implied geography map!)&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;European_nations_text &amp;lt;- &amp;quot;Russia,Germany,France,United Kingdom,Italy,Spain,Ukraine,Poland,Romania,Netherlands,Belgium,Greece,Portugal,Czech Republic,Hungary,Sweden,Belarus,Austria,Switzerland,Bulgaria,Serbia,Denmark,Finland,Slovakia,Norway,Ireland,Croatia,Bosnia and Herzegovina,Moldova,Lithuania,Albania,Macedonia,Slovenia,Latvia,Kosovo,Estonia,Montenegro,Luxembourg,Malta,Iceland,Jersey (UK),Isle of Man (UK),Andorra,Guernsey (UK),Faroe Islands (Denmark),Liechtenstein,Monaco,San Marino,Gibraltar (UK),Aland Islands (Finland),Svalbard and Jan Mayen (Norway),Vatican City&amp;quot;
European_nations_list &amp;lt;- str_split(European_nations_text,&amp;quot;,&amp;quot;)[[1]]

# an unfortunate &amp;#39;hack&amp;#39;
all_data$country[all_data$country == &amp;quot;Great Britain&amp;quot;] &amp;lt;- &amp;quot;United Kingdom&amp;quot;

# main plot
all_data %&amp;gt;%
  filter(country %in% European_nations_list) %&amp;gt;%
  ggplot(aes(x = year, y = gai, color = country, group = country)) +
  geom_line() +
  geom_point(size = 2) +
  facet_geo(~ country, grid = &amp;quot;eu_grid1&amp;quot;) +
  labs(title = &amp;quot;Social Acceptance of LGBT People in Europe&amp;quot;,
       subtitle = &amp;quot;Global Acceptance Index&amp;quot;,
       caption = &amp;quot;Data Source: UCLA Williams Institute&amp;quot;,
       x = &amp;quot;&amp;quot;,
       y = &amp;quot;&amp;quot;) +
  scale_x_continuous(breaks = c(2003, 2008, 2013, 2017),
                   labels = c(&amp;quot;2003&amp;quot;, &amp;quot;2008&amp;quot;, &amp;quot;2013&amp;quot;, &amp;quot;2017&amp;quot;)) +
  scale_y_continuous(breaks = c(0, 2, 4, 6, 8, 10),
                   labels = c(&amp;quot;0&amp;quot;, &amp;quot;2&amp;quot;, &amp;quot;4&amp;quot;, &amp;quot;6&amp;quot;, &amp;quot;8&amp;quot;, &amp;quot;10&amp;quot;)) +
  theme(axis.text.x = element_text(angle = 90),
        legend.position = &amp;quot;none&amp;quot;,
        panel.background = element_rect(fill = &amp;quot;white&amp;quot;),
        panel.border = element_rect(color = &amp;quot;black&amp;quot;, fill = NA))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-30-geofacet-plot-vingette_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;all_data %&amp;gt;%
  filter(country %in% European_nations_list) %&amp;gt;%
  ggplot(aes(x = year, y = gai, color = country, group = country)) +
  geom_line() +
  geom_point(size = 4) +
  facet_geo(~ country, grid = &amp;quot;eu_grid1&amp;quot;) +
  labs(title = &amp;quot;Social Acceptance of LGBT People in Europe&amp;quot;,
       subtitle = &amp;quot;Global Acceptance Index&amp;quot;,
       caption = &amp;quot;Data Source: UCLA Williams Institute&amp;quot;,
       x = &amp;quot;&amp;quot;,
       y = &amp;quot;&amp;quot;) +
  scale_x_continuous(breaks = c(2003, 2008, 2013, 2017),
                   labels = c(&amp;quot;2003&amp;quot;, &amp;quot;2008&amp;quot;, &amp;quot;2013&amp;quot;, &amp;quot;2017&amp;quot;)) +
  scale_y_continuous(breaks = c(0, 2, 4, 6, 8, 10),
                   labels = c(&amp;quot;0&amp;quot;, &amp;quot;2&amp;quot;, &amp;quot;4&amp;quot;, &amp;quot;6&amp;quot;, &amp;quot;8&amp;quot;, &amp;quot;10&amp;quot;)) +
  theme(axis.text.x = element_text(angle = 90),
        legend.position = &amp;quot;none&amp;quot;,
        panel.background = element_rect(fill = &amp;quot;white&amp;quot;),
        panel.border = element_rect(color = &amp;quot;black&amp;quot;, fill = NA),
        panel.grid = element_line(color = &amp;quot;gray80&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Some values in the specified facet_geo column &amp;#39;country&amp;#39; do not match
##   the &amp;#39;name&amp;#39; column of the specified grid and will be removed: Iceland,
##   Switzerland, Norway, Andorra, Serbia, Macedonia, Russia, Belarus,
##   Ukraine, Montenegro, Moldova, Albania, Kosovo&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-30-geofacet-plot-vingette_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sessionInfo()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## R version 4.0.0 (2020-04-24)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 18362)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=English_United States.1252 
## [2] LC_CTYPE=English_United States.1252   
## [3] LC_MONETARY=English_United States.1252
## [4] LC_NUMERIC=C                          
## [5] LC_TIME=English_United States.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] forcats_0.5.0   stringr_1.4.0   dplyr_0.8.5     purrr_0.3.4    
##  [5] readr_1.3.1     tidyr_1.0.2     tibble_3.0.1    ggplot2_3.3.0  
##  [9] tidyverse_1.3.0 geofacet_0.2.0 
## 
## loaded via a namespace (and not attached):
##  [1] ggrepel_0.8.2       Rcpp_1.0.4.6        rnaturalearth_0.1.0
##  [4] lubridate_1.7.8     lattice_0.20-41     png_0.1-7          
##  [7] class_7.3-16        utf8_1.1.4          assertthat_0.2.1   
## [10] digest_0.6.25       R6_2.4.1            cellranger_1.1.0   
## [13] backports_1.1.6     reprex_0.3.0        evaluate_0.14      
## [16] e1071_1.7-3         httr_1.4.1          blogdown_0.18      
## [19] pillar_1.4.4        rlang_0.4.5         geogrid_0.1.1      
## [22] readxl_1.3.1        rstudioapi_0.11     rmarkdown_2.1      
## [25] labeling_0.3        munsell_0.5.0       broom_0.5.6        
## [28] compiler_4.0.0      modelr_0.1.7        xfun_0.13          
## [31] pkgconfig_2.0.3     imguR_1.0.3         rgeos_0.5-3        
## [34] htmltools_0.4.0     tidyselect_1.0.0    gridExtra_2.3      
## [37] bookdown_0.18       fansi_0.4.1         withr_2.2.0        
## [40] crayon_1.3.4        dbplyr_1.4.3        sf_0.9-3           
## [43] grid_4.0.0          nlme_3.1-147        jsonlite_1.6.1     
## [46] gtable_0.3.0        lifecycle_0.2.0     DBI_1.1.0          
## [49] magrittr_1.5        units_0.6-6         scales_1.1.0       
## [52] KernSmooth_2.23-16  cli_2.0.2           stringi_1.4.6      
## [55] farver_2.0.3        fs_1.4.1            sp_1.4-1           
## [58] xml2_1.3.2          ellipsis_0.3.0      generics_0.0.2     
## [61] vctrs_0.2.4         tools_4.0.0         glue_1.4.0         
## [64] hms_0.5.3           jpeg_0.1-8.1        yaml_2.2.1         
## [67] colorspace_1.4-1    rvest_0.3.5         classInt_0.4-3     
## [70] knitr_1.28          haven_2.2.0&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Mapping Social Acceptance of LGBT People</title>
      <link>/post/mapping-social-acceptance-of-lgbt-people/</link>
      <pubDate>Tue, 26 May 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/mapping-social-acceptance-of-lgbt-people/</guid>
      <description>&lt;p&gt;Inspired by this morning’s meeting of the Bisexual Research Group, I am going to draft a quick map of LGBT acceptance in Africa.&lt;/p&gt;
&lt;div id=&#34;sources-and-tools&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Sources and tools&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://williamsinstitute.law.ucla.edu/publications/global-acceptance-index-lgbt/&#34;&gt;Social Acceptance of LGBT People in 174 Countries&lt;/a&gt; publication from the UCLA School of Law Williams Institute&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.worldometers.info/geography/how-many-countries-in-africa/&#34;&gt;List of African nations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://simplypdf.com/Excel&#34;&gt;SimplyPDF&lt;/a&gt; to extract table of data from a PDF document&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://convert.town/column-to-comma-separated-list&#34;&gt;Convert Town&lt;/a&gt; to convert spreadsheet columns to comma-separated lists&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(&amp;quot;tidyverse&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;data&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;rank &amp;lt;- 1:174
countries_text &amp;lt;- &amp;quot;Iceland,Netherlands,Norway,Canada,Spain,Belgium,Ireland,Sweden,Denmark,Nepal,Great Britain,Luxembourg,Malta,Uruguay,New Zealand,Germany,Finland,Switzerland,Puerto Rico,Australia,United States,France,Argentina,Austria,Brazil,Cape Verde,Chile,Philippines,Hong Kong,Italy,Portugal,Mexico,South Africa,Costa Rica,Cuba,Czech Republic,Colombia,Slovenia,Venezuela,Taiwan,Ecuador,Nicaragua,Bahrain,Bolivia,Israel,Suriname,Laos,Syria,Panama,El Salvador,Mauritius,Northern Cyprus,Peru,Croatia,Dominican Republic,Namibia,Honduras,Paraguay,Cyprus,Thailand,Slovakia,Greece,Mozambique,Andorra,Hungary,Japan,South Korea,Estonia,Myanmar,Poland,Bangladesh,Barbados,Cambodia,Guatemala,Singapore,Sao Tome and Principe,Trinidad and Tobago,Guyana,Bulgaria,Vietnam,India,Botswana,Grenada,Latvia,Turkey,Bahamas,Belize,Saint Kitts and Nevis,Malaysia,Serbia,Algeria,Lithuania,Jamaica,Dominica,Romania,Bhutan,Lebanon,Saint Lucia,Swaziland,Lesotho,China,Antigua and Barbuda,Angola,Yemen,Benin,Haiti,Uzbekistan,Libya,Montenegro,Tunisia,Saint Vincent and the Grenadines,Kuwait,Uganda,Jordan,Albania,Belarus,Gambia,Morocco,Kenya,Russia,Democratic Republic of the Congo,Ukraine,Qatar,Palestine,Madagascar,Tanzania,Cote d&amp;#39;Ivoire,Republic of the Congo,Iraq,Gabon,Kazakhstan,Sudan,Bosnia Herzegovina,Sierra Leone,Macedonia,Comoros,Saudi Arabia,Burkina Faso,Togo,Kyrgyzstan,Ghana,Mongolia,Rwanda,Kosovo,Cameroon,Nigeria,Zambia,Central African Republic,Zimbabwe,Indonesia,Djibouti,Chad,Niger,Mali,Guinea,Afghanistan,Liberia,Moldova,Georgia,Burundi,South Sudan,Mauritania,Sri Lanka,Iran,Pakistan,Malawi,Nagorno- Karabakh,Armenia,Egypt,Ethiopia,Somaliland,Senegal,Azerbaijan,Tajikistan&amp;quot;
country &amp;lt;- str_split(countries_text,&amp;quot;,&amp;quot;)[[1]]
GAI_text &amp;lt;- &amp;quot;8.9,8.6,8.2,8.2,8.1,7.9,7.9,7.9,7.9,7.8,7.7,7.7,7.6,7.6,7.5,7.4,7.4,7.4,7.4,7.3,7.2,7.1,6.9,6.8,6.8,6.8,6.7,6.6,6.5,6.4,6.4,6.3,6.2,6.1,6.1,6,5.9,5.9,5.7,5.7,5.6,5.6,5.5,5.4,5.4,5.4,5.4,5.4,5.3,5.3,5.3,5.3,5.3,5.2,5.2,5.2,5.2,5.2,5.1,5.1,5,5,5,4.9,4.9,4.9,4.9,4.9,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.7,4.7,4.6,4.6,4.5,4.5,4.5,4.4,4.4,4.4,4.3,4.2,4.2,4.2,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4,3.9,3.9,3.9,3.7,3.7,3.6,3.6,3.6,3.6,3.6,3.5,3.5,3.5,3.5,3.5,3.5,3.5,3.4,3.4,3.4,3.4,3.4,3.3,3.2,3.2,3.2,3.2,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3,3,3,3,3,3,3,3,2.9,2.9,2.9,2.9,2.9,2.8,2.8,2.8,2.8,2.8,2.8,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.6,2.6,2.4,2.4,2.4,2.3,2.2,2.2,2.2,2.1,1.8,1.7,1.7,1.6&amp;quot;
GAI &amp;lt;- as.numeric(str_split(GAI_text,&amp;quot;,&amp;quot;)[[1]])&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;GAI_data &amp;lt;- data.frame(rank, country, GAI)
head(GAI_data)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   rank     country GAI
## 1    1     Iceland 8.9
## 2    2 Netherlands 8.6
## 3    3      Norway 8.2
## 4    4      Canada 8.2
## 5    5       Spain 8.1
## 6    6     Belgium 7.9&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;map&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Map&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;countries_map &amp;lt;- map_data(&amp;quot;world&amp;quot;)
choropleth_data &amp;lt;- left_join(countries_map, GAI_data, by = c(&amp;quot;region&amp;quot; = &amp;quot;country&amp;quot;))
choropleth_data %&amp;gt;%
  ggplot(aes(long, lat, group = group)) +
  geom_polygon(aes(fill = GAI), color = &amp;quot;black&amp;quot;) +
  scale_fill_viridis_c(option = &amp;quot;C&amp;quot;) +
  labs(title = &amp;quot;Social Acceptance of LGBT People&amp;quot;,
       subtitle = &amp;quot;Global Acceptance Index&amp;quot;,
       caption = &amp;quot;Data Source: UCLA Williams School&amp;quot;,
       fill = &amp;quot;GAI&amp;quot;,
       x = &amp;quot;&amp;quot;,
       y = &amp;quot;&amp;quot;) +
  theme(axis.text.x = element_blank(),
        axis.text.y = element_blank(),
        axis.ticks.x = element_blank(),
        axis.ticks.y = element_blank(),
        panel.background = element_rect(fill = &amp;quot;white&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-26-mapping-social-acceptance-of-lgbt-people_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;africa&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Africa&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;African_nations_text &amp;lt;- &amp;quot;Nigeria,Ethiopia,Egypt,DR Congo,Tanzania,South Africa,Kenya,Uganda,Algeria,Sudan,Morocco,Angola,Mozambique,Ghana,Madagascar,Cameroon,Côte d&amp;#39;Ivoire,Niger,Burkina Faso,Mali,Malawi,Zambia,Senegal,Chad,Somalia,Zimbabwe,Guinea,Rwanda,Benin,Burundi,Tunisia,South Sudan,Togo,Sierra Leone,Libya,Congo,Liberia,Central African Republic,Mauritania,Eritrea,Namibia,Gambia,Botswana,Gabon,Lesotho,Guinea-Bissau,Equatorial Guinea,Mauritius,Eswatini,Djibouti,Comoros,Cabo Verde,Sao Tome &amp;amp; Principe,Seychelles&amp;quot;
African_nations_list &amp;lt;- str_split(African_nations_text,&amp;quot;,&amp;quot;)[[1]]

choropleth_data %&amp;gt;%
  filter(region %in% African_nations_list) %&amp;gt;%
  ggplot(aes(long, lat, group = group)) +
  geom_polygon(aes(fill = GAI), color = &amp;quot;black&amp;quot;) +
  scale_fill_viridis_c(option = &amp;quot;C&amp;quot;) +
  labs(title = &amp;quot;Social Acceptance of LGBT People&amp;quot;,
       subtitle = &amp;quot;Global Acceptance Index&amp;quot;,
       caption = &amp;quot;Data Source: UCLA Williams School&amp;quot;,
       fill = &amp;quot;GAI&amp;quot;,
       x = &amp;quot;&amp;quot;,
       y = &amp;quot;&amp;quot;) +
  theme(axis.text.x = element_blank(),
        axis.text.y = element_blank(),
        axis.ticks.x = element_blank(),
        axis.ticks.y = element_blank(),
        panel.background = element_rect(fill = &amp;quot;white&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-26-mapping-social-acceptance-of-lgbt-people_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Vote by Mail data</title>
      <link>/post/vote-by-mail-data/</link>
      <pubDate>Mon, 25 May 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/vote-by-mail-data/</guid>
      <description>&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(&amp;quot;dplyr&amp;quot;)
library(&amp;quot;ggplot2&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;data&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data&lt;/h1&gt;
&lt;p&gt;Today I am going to try to make a choropleth (map + data) of the percentage of registered voters that sent in ballots for the 2018 elections in the USA. I gathered the data from and by the following sites:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://fivethirtyeight.com/features/few-states-are-prepared-to-switch-to-voting-by-mail-that-could-make-for-a-messy-election/&#34;&gt;Few States Are Prepared To Switch To Voting By Mail. That Could Make For A Messy Election&lt;/a&gt; — FiveThirtyEight artcle from April 27, 2020&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://knowledgelink.upenn.edu/admin/guides/HowToCommaList-101612.pdf&#34;&gt;How to Create a Comma Separated List from an Excel Column&lt;/a&gt; — from University of Pennsylvania&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;states &amp;lt;- tolower( sort(c(state.name, &amp;quot;District of Columbia&amp;quot;)))
voted2018 &amp;lt;- c(2,5,62,1,54,88,4,3,2,25,4,38,9,6,17,16,10,1,2,18,4,2,15,21,3,6,63,15,6,5,10,36,3,2,NA,13,4,104,3,4,2,15,1,4,89,6,2,92,1,5,22)
vote_data &amp;lt;- data.frame(states, voted2018)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The 538 article’s table caption included the following notes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;“It’s not possible to calculate these numbers for North Dakota, as it doesn’t have voter registration. However, it does have a relatively high rate of mail voting — 23 percent of its votes were cast by mail in 2016, and 29 percent in 2018. Republicans control both the governorship and state legislature in North Dakota.”&lt;/li&gt;
&lt;li&gt;“When asked how Oregon mailed ballots to 104 percent of voters in 2018, state election officials responded that the EAC number was “off” but did not provide further details.&#34;&lt;/li&gt;
&lt;li&gt;Sources: Ballotpedia, U.S. Election Assistance Commission&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;choropleth&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Choropleth&lt;/h1&gt;
&lt;p&gt;Adapted from &lt;a href=&#34;https://www.r-bloggers.com/choropleth-map-in-ggplot2/&#34;&gt;Choropleth Map in ggplot2&lt;/a&gt; by ‘data technik’&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;states_map &amp;lt;- map_data(&amp;quot;state&amp;quot;)
fact_join &amp;lt;- left_join(states_map, vote_data, by = c(&amp;quot;region&amp;quot; = &amp;quot;states&amp;quot;))
fact_join %&amp;gt;%
  ggplot(aes(long, lat, group = group)) +
  geom_polygon(aes(fill = voted2018), color = &amp;quot;black&amp;quot;) +
  scale_fill_viridis_c(option = &amp;quot;C&amp;quot;) +
  labs(title = &amp;quot;A View of Voting by Mail&amp;quot;,
       subtitle = &amp;quot;Percentage of registered voters that sent in ballots in 2018&amp;quot;,
       caption = &amp;quot;Alaska: 2%, Hawaii: 38%, North Dakota: NA \n Data Source: FiveThirtyEight&amp;quot;,
       fill = &amp;quot;% voted by mail&amp;quot;,
       x = &amp;quot;&amp;quot;,
       y = &amp;quot;&amp;quot;) +
  theme(axis.text.x = element_blank(),
        axis.text.y = element_blank(),
        axis.ticks.x = element_blank(),
        axis.ticks.y = element_blank(),
        panel.background = element_rect(fill = &amp;quot;white&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-25-vote-by-mail-data_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Analysis of NYT Sample of Covid-19 Obituaries</title>
      <link>/post/analysis-of-nyt-sample-of-covid-19-obituaries/</link>
      <pubDate>Sun, 24 May 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/analysis-of-nyt-sample-of-covid-19-obituaries/</guid>
      <description>&lt;div id=&#34;obtaining-the-data&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Obtaining the Data&lt;/h1&gt;
&lt;p&gt;On May 24, 2020, the &lt;em&gt;New York Times&lt;/em&gt; published an article called “&lt;a href=&#34;https://www.nytimes.com/interactive/2020/05/24/us/us-coronavirus-deaths-100000.html&#34;&gt;An Incalcuable Loss&lt;/a&gt;”&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;quot;America is fast approaching a grim milestone in the coronavirus outbreak — each figure here represents one of the nearly 100,000 lives lost so far. But a count reveals only so much. Memories, gathered from obituaries across the country, help us to reckon with what was lost.&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;What I am trying to do today is summarize the 1001 obituaries.&lt;/p&gt;
&lt;p&gt;I started out by manually&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;going to &lt;a href=&#34;https://www.nytimes.com/interactive/2020/05/24/us/us-coronavirus-deaths-100000.html&#34;&gt;https://www.nytimes.com/interactive/2020/05/24/us/us-coronavirus-deaths-100000.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;right-clicking and selecting “View Source”&lt;/li&gt;
&lt;li&gt;copy-and-pasting the HTML code to a text document&lt;/li&gt;
&lt;li&gt;paring down the HTML code to focus on the obituaries.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;div id=&amp;quot;g-obits&amp;quot;&amp;gt;
    &amp;lt;div id=&amp;quot;g-obit-frame&amp;quot;&amp;gt;
        
            &amp;lt;div id=&amp;quot;g-0&amp;quot; class=&amp;quot;g-obit&amp;quot; data-date=&amp;quot;February 6&amp;quot;&amp;gt;
                &amp;lt;div class=&amp;quot;g-obit-inner&amp;quot;&amp;gt;
                    &amp;lt;b&amp;gt;Auditor in Silicon Valley.&amp;lt;/b&amp;gt;
                    ...
    ...             &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;texts &amp;lt;- readLines(&amp;quot;obituaries.txt&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;word-cloud&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Word Cloud&lt;/h1&gt;
&lt;p&gt;For one view, I wanted to make a word cloud to reveal the most commonly used words in the one-sentence obituaries. I used the &lt;code&gt;stringr&lt;/code&gt; package to extract the text in between the &lt;strong&gt;bold&lt;/strong&gt; HTML tags (as well as removing the period).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;obits &amp;lt;- str_extract_all(texts, regex(&amp;quot;(?&amp;lt;=&amp;lt;b&amp;gt;)(.*?)(?=.&amp;lt;/b&amp;gt;)&amp;quot;, multiline = TRUE))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There is &lt;code&gt;R&lt;/code&gt; code and packages for making word clouds, but I find it best to use the site &lt;a href=&#34;https://www.wordclouds.com/&#34;&gt;wordclouds.com&lt;/a&gt; since that application has many neat features. Thus, all I needed at this point is to save the results to upload to that site.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;write_lines(unlist(obits), &amp;quot;clean.txt&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;density-plot-of-ages&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Density Plot of Ages&lt;/h1&gt;
&lt;p&gt;Q: Does Covid-19 only affect older people?&lt;/p&gt;
&lt;p&gt;For this analysis, I seek the two- or three-digit numbers in between the &lt;em&gt;italics&lt;/em&gt; HTML tags.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ages &amp;lt;- as.integer( unlist( str_extract_all(texts, regex(&amp;quot;(?&amp;lt;=,)(.[0-9]{2,3}?)(?=,)&amp;quot;, multiline = TRUE) )))

summary(ages)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   22.00   67.00   80.00   76.72   89.00  108.00&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data.frame(ages) %&amp;gt;%
  ggplot(aes(x = ages)) +
  geom_density(fill = &amp;quot;black&amp;quot;) +
  labs(title = &amp;quot;Ages of Covid-19 Casualties&amp;quot;,
       subtitle = &amp;quot;Sample of Obituaries from February to May 2020&amp;quot;,
       caption = &amp;quot;Source: New York Times&amp;quot;,
       x = &amp;quot;Age&amp;quot;,
       y = &amp;quot;density&amp;quot;) +
  theme(axis.text.y = element_blank())&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-24-analysis-of-nyt-sample-of-covid-19-obituaries_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;spread-by-week&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Spread by Week&lt;/h1&gt;
&lt;p&gt;Out of curiosity, here I hope to build a boxplot of the ages, but grouped by week of the year.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dates &amp;lt;- unlist( str_extract_all(texts, regex(&amp;quot;(?&amp;lt;=date=\&amp;quot;)(.*?)(?=\&amp;quot;)&amp;quot;, multiline = TRUE) ))


# There was one missing age value in this data, so I am going to choose to delete the last date
# with hopes that the data still mostly lines up
dates &amp;lt;- dates[1:1000]

df &amp;lt;- data.frame(ages, dates)

# separate month and day
df &amp;lt;- df %&amp;gt;%
  separate(dates, into = c(&amp;quot;month&amp;quot;, &amp;quot;day&amp;quot;), remove = FALSE)

# Soon, I want to know the day of the year (i.e. how far into the year 2020), so here I make offsets,
df &amp;lt;- df %&amp;gt;%
  mutate(offset = case_when(month == &amp;quot;February&amp;quot; ~ 31,
                            month == &amp;quot;March&amp;quot; ~ 60,
                            month == &amp;quot;April&amp;quot; ~ 91,
                            TRUE ~ 121))

# Adding the offset and the obituary day to get the day of the year
df$day &amp;lt;- as.integer(df$day)
df &amp;lt;- df %&amp;gt;%
  mutate(day_of_year = offset + day)

# Finally, we divide by 7 to get the week of the year
df &amp;lt;- df %&amp;gt;%
  mutate(week_of_year = ceiling(day_of_year / 7))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;%
  ggplot(aes(x = week_of_year, y = ages, fill = week_of_year, group = week_of_year)) +
  geom_boxplot() +
  labs(title = &amp;quot;US Covid-19 Deaths&amp;quot;,
       subtitle = &amp;quot;Age Distributions by week, Sample of n = 1000 obituaries&amp;quot;,
       caption = &amp;quot;Data Source: New York Times&amp;quot;,
       x = &amp;quot;Week of Year (since start of 2020)&amp;quot;,
       y = &amp;quot;Age&amp;quot;) +
  theme(legend.position = &amp;quot;none&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-24-analysis-of-nyt-sample-of-covid-19-obituaries_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Introduction to Unsupervised Learning</title>
      <link>/post/introduction-to-unsupervised-learning/</link>
      <pubDate>Wed, 06 May 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/introduction-to-unsupervised-learning/</guid>
      <description>&lt;div id=&#34;unsupervised-learning&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Unsupervised Learning&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Supervised learning&lt;/strong&gt; has the goal of making predictions with a set of &lt;em&gt;known&lt;/em&gt; labels for the response variable.&lt;/li&gt;
&lt;li&gt;In &lt;strong&gt;unsupervised learning&lt;/strong&gt;, we try to find structure in the data of the response variable without predetermined labels.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Goal: organize the items available in the &lt;code&gt;Animal Crossing&lt;/code&gt; video game&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;data-set-animal-crossing&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data set: Animal Crossing&lt;/h1&gt;
&lt;p&gt;Source: VillagerDB, MetaCritic, and TidyTuesday&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-05-05/readme.md&#34;&gt;Animal Crossing Tidy Tuesday&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(&amp;quot;ggrepel&amp;quot;)
library(&amp;quot;tidyverse&amp;quot;)

# critic &amp;lt;- readr::read_tsv(&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/critic.tsv&amp;#39;)
# user_reviews &amp;lt;- readr::read_tsv(&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/user_reviews.tsv&amp;#39;)
items &amp;lt;- readr::read_csv(&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/items.csv&amp;#39;)
# villagers &amp;lt;- readr::read_csv(&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/villagers.csv&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;exploratory-data-analysis&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Exploratory Data Analysis&lt;/h1&gt;
&lt;div id=&#34;variables&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;variables&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dim(items)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 4565   16&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(items)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## tibble [4,565 x 16] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ num_id       : num [1:4565] 12 14 17 19 20 21 23 24 26 26 ...
##  $ id           : chr [1:4565] &amp;quot;3d-glasses&amp;quot; &amp;quot;a-tee&amp;quot; &amp;quot;abstract-wall&amp;quot; &amp;quot;academy-uniform&amp;quot; ...
##  $ name         : chr [1:4565] &amp;quot;3D Glasses&amp;quot; &amp;quot;A Tee&amp;quot; &amp;quot;Abstract Wall&amp;quot; &amp;quot;Academy Uniform&amp;quot; ...
##  $ category     : chr [1:4565] &amp;quot;Accessories&amp;quot; &amp;quot;Tops&amp;quot; &amp;quot;Wallpaper&amp;quot; &amp;quot;Dresses&amp;quot; ...
##  $ orderable    : logi [1:4565] NA NA TRUE NA FALSE TRUE ...
##  $ sell_value   : num [1:4565] 122 140 390 520 2000 375 420 330 8990 8990 ...
##  $ sell_currency: chr [1:4565] &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; ...
##  $ buy_value    : num [1:4565] 490 560 1560 2080 NA ...
##  $ buy_currency : chr [1:4565] &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; ...
##  $ sources      : chr [1:4565] NA NA &amp;quot;Nook&amp;#39;s Cranny&amp;quot; NA ...
##  $ customizable : logi [1:4565] NA NA NA NA NA FALSE ...
##  $ recipe       : num [1:4565] NA NA NA NA NA NA NA NA NA NA ...
##  $ recipe_id    : chr [1:4565] NA NA NA NA ...
##  $ games_id     : chr [1:4565] &amp;quot;nh&amp;quot; &amp;quot;nh&amp;quot; &amp;quot;nh&amp;quot; &amp;quot;nh&amp;quot; ...
##  $ id_full      : chr [1:4565] &amp;quot;item-3d-glasses&amp;quot; &amp;quot;item-a-tee&amp;quot; NA &amp;quot;item-academy-uniform&amp;quot; ...
##  $ image_url    : chr [1:4565] &amp;quot;https://villagerdb.com/images/items/full/3d-glasses.b8e1b5a.png&amp;quot; &amp;quot;https://villagerdb.com/images/items/full/a-tee.a1af443.png&amp;quot; NA &amp;quot;https://villagerdb.com/images/items/full/academy-uniform.4475eb5.png&amp;quot; ...
##  - attr(*, &amp;quot;problems&amp;quot;)= tibble [2 x 5] (S3: tbl_df/tbl/data.frame)
##   ..$ row     : int [1:2] 4472 4473
##   ..$ col     : chr [1:2] &amp;quot;customizable&amp;quot; &amp;quot;customizable&amp;quot;
##   ..$ expected: chr [1:2] &amp;quot;1/0/T/F/TRUE/FALSE&amp;quot; &amp;quot;1/0/T/F/TRUE/FALSE&amp;quot;
##   ..$ actual  : chr [1:2] &amp;quot;Yes&amp;quot; &amp;quot;Yes&amp;quot;
##   ..$ file    : chr [1:2] &amp;quot;&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/items.csv&amp;#39;&amp;quot; &amp;quot;&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/items.csv&amp;#39;&amp;quot;
##  - attr(*, &amp;quot;spec&amp;quot;)=
##   .. cols(
##   ..   num_id = col_double(),
##   ..   id = col_character(),
##   ..   name = col_character(),
##   ..   category = col_character(),
##   ..   orderable = col_logical(),
##   ..   sell_value = col_double(),
##   ..   sell_currency = col_character(),
##   ..   buy_value = col_double(),
##   ..   buy_currency = col_character(),
##   ..   sources = col_character(),
##   ..   customizable = col_logical(),
##   ..   recipe = col_double(),
##   ..   recipe_id = col_character(),
##   ..   games_id = col_character(),
##   ..   id_full = col_character(),
##   ..   image_url = col_character()
##   .. )&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;table(items$category)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Accessories     Bottoms        Bugs     Dresses        Fish    Flooring 
##         123         142          80         239         101         324 
##     Flowers     Fossils       Fruit   Furniture        Hats       Music 
##         109          76          12        1264         230          95 
##      Photos   Seashells       Shoes       Socks       Tools        Tops 
##         840           8          89          60          74         289 
##   Umbrellas     Usables   Wallpaper 
##          67          88         255&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;summary(items$buy_value)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&amp;#39;s 
##      40     870    1300    6960    2700 1200000    1014&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# table(items$buy_currency)
summary(items$sell_value)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&amp;#39;s 
##       5     240     390    2261    1000  300000      36&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;summary(items$num_id)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##      12    1722    3569    3662    5607    7443&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;summary(items$recipe)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&amp;#39;s 
##   1.000   2.000   3.000   4.711   6.000  90.000    3977&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;numerical-variables&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;numerical variables&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;items %&amp;gt;%
  ggplot(aes(x = buy_value, y = sell_value, color = category)) +
  geom_point() +
  coord_trans(x = &amp;quot;log10&amp;quot;) + 
  labs(title = &amp;quot;Items in Animal Crossing&amp;quot;,
       subtitle = &amp;quot;Sell Values vs Buy Values&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;) +
  scale_x_continuous(name = &amp;quot;Buy Value&amp;quot;,
                     breaks = c(0, 10, 100, 1000, 10000, 100000, 1000000),
                     labels = c(&amp;quot;0&amp;quot;, &amp;quot;10&amp;quot;, &amp;quot;100&amp;quot;, &amp;quot;1000&amp;quot;, &amp;quot;10000&amp;quot;, &amp;quot;100000&amp;quot;, &amp;quot;1000000&amp;quot;)) +
  scale_y_continuous(name = &amp;quot;Sell Value&amp;quot;,
                     breaks = c(0, 50000, 100000, 150000, 200000, 250000, 300000),
                     labels = c(&amp;quot;0&amp;quot;, &amp;quot;50000&amp;quot;, &amp;quot;100000&amp;quot;, &amp;quot;150000&amp;quot;, &amp;quot;200000&amp;quot;, &amp;quot;250000&amp;quot;, &amp;quot;300000&amp;quot;)) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Removed 1035 rows containing missing values (geom_point).&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;k-means-clustering&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;K-Means Clustering&lt;/h1&gt;
&lt;div id=&#34;first-look&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;first look&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df_numerical &amp;lt;- items %&amp;gt;%
  select(num_id, buy_value, sell_value, recipe) %&amp;gt;%
  filter(complete.cases(.))

summary(df_numerical$buy_value)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##     240    3780    7080   16912   16480  320000&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;summary(df_numerical$sell_value)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##      60     945    1770    4228    4120   80000&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;clusters4 &amp;lt;- kmeans(df_numerical, 4)

items_with_clusters &amp;lt;- cbind(df_numerical, clusters4$cluster)
colnames(items_with_clusters) &amp;lt;- c(&amp;quot;ID&amp;quot;, &amp;quot;buy&amp;quot;, &amp;quot;sell&amp;quot;, &amp;quot;recipe&amp;quot;, &amp;quot;cluster&amp;quot;)
items_with_clusters$cluster &amp;lt;- factor(items_with_clusters$cluster)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x_breaks &amp;lt;- c(0, 10, 100, 1000, 10000, 100000, 1000000)
y_breaks &amp;lt;- c(0, 10000, 20000, 30000, 40000, 50000, 60000, 70000, 80000)

items_with_clusters %&amp;gt;%
  ggplot() +
  geom_point(aes(x = buy, y = sell)) +
  geom_point(aes(x = buy_value, y = sell_value), 
             data = data.frame(clusters4$centers),
             size = 5,
             color = &amp;quot;blue&amp;quot;) +
  coord_trans(x = &amp;quot;log10&amp;quot;) +
  labs(title = &amp;quot;Items in Animal Crossing&amp;quot;,
       subtitle = &amp;quot;Cluster Centers&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;) +
  scale_x_continuous(name = &amp;quot;Buy Value&amp;quot;,
                     breaks = x_breaks,
                     labels = paste(x_breaks)) +
  scale_y_continuous(name = &amp;quot;Sell Value&amp;quot;,
                     breaks = y_breaks,
                     labels = paste(y_breaks)) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;items_with_clusters %&amp;gt;%
  ggplot(group = cluster) +
  geom_point(aes(x = buy, y = sell, color = cluster), size = 3) +
  coord_trans(x = &amp;quot;log10&amp;quot;) +
  labs(title = &amp;quot;Items in Animal Crossing&amp;quot;,
       subtitle = &amp;quot;4 Clusters&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;) +
  scale_x_continuous(name = &amp;quot;Buy Value&amp;quot;,
                     breaks = x_breaks,
                     labels = paste(x_breaks)) +
  scale_y_continuous(name = &amp;quot;Sell Value&amp;quot;,
                     breaks = y_breaks,
                     labels = paste(y_breaks)) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;selecting-the-amount-of-clusters&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;selecting the amount of clusters&lt;/h2&gt;
&lt;p&gt;Selecting the number of clusters is rather subjective.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;too few clusters: items that are “far” from each other are still grouped together&lt;/li&gt;
&lt;li&gt;too many clusters: harder to describe and label groups later&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We start with an &lt;span class=&#34;math inline&#34;&gt;\(d\)&lt;/span&gt;-dimensional data set of numerical variables and prescribe a number &lt;span class=&#34;math inline&#34;&gt;\(k\)&lt;/span&gt; for the number of clusters and run the &lt;code&gt;kmeans&lt;/code&gt; algorithm.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Each cluster &lt;span class=&#34;math inline&#34;&gt;\(C_{k}\)&lt;/span&gt; has &lt;span class=&#34;math inline&#34;&gt;\(n_{k}\)&lt;/span&gt; points labeled &lt;span class=&#34;math inline&#34;&gt;\(x_{i}\)&lt;/span&gt; in &lt;span class=&#34;math inline&#34;&gt;\(d\)&lt;/span&gt;-dimensional space&lt;/li&gt;
&lt;li&gt;Each cluster has a cluster center &lt;span class=&#34;math inline&#34;&gt;\(\mu_{k}\)&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Each cluster has a &lt;em&gt;within-sum-of-squares&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[WSS = \displaystyle\sum_{x_{i} \in C_{k}} (x_{i} - \mu_{k})^{2}\]&lt;/span&gt;
Thus, our metric for the clustering will be the reported &lt;em&gt;total-within-sum-of-squares&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[TWSS = \displaystyle\sum_{j=1}^{k}\sum_{x_{i} \in C_{k}} (x_{i} - \mu_{k})^{2}\]&lt;/span&gt;
For example, the total-within-sum-of-squares for the 4-cluster results above is 3.148635410^{10}.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;scree-plot&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;scree plot&lt;/h2&gt;
&lt;p&gt;It is common practice to build a &lt;em&gt;scree plot&lt;/em&gt; and look for the “elbow”.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;clusters1 &amp;lt;- kmeans(df_numerical, 1)
clusters2 &amp;lt;- kmeans(df_numerical, 2)
clusters3 &amp;lt;- kmeans(df_numerical, 3)
clusters4 &amp;lt;- kmeans(df_numerical, 4)
clusters5 &amp;lt;- kmeans(df_numerical, 5)
clusters6 &amp;lt;- kmeans(df_numerical, 6)
clusters7 &amp;lt;- kmeans(df_numerical, 7)
clusters8 &amp;lt;- kmeans(df_numerical, 8)
clusters9 &amp;lt;- kmeans(df_numerical, 9)

TSS_vector &amp;lt;- c(clusters1$tot.withinss, clusters2$tot.withinss, clusters3$tot.withinss, 
                clusters4$tot.withinss, clusters5$tot.withinss, clusters6$tot.withinss, 
                clusters7$tot.withinss, clusters8$tot.withinss, clusters9$tot.withinss)

k_vals &amp;lt;- 1:9
df_for_scree_plot &amp;lt;- data.frame(k_vals, TSS_vector)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df_for_scree_plot %&amp;gt;%
  ggplot(aes(x = k_vals, y = TSS_vector)) +
  geom_point(size = 3) +
  geom_line() +
  labs(title = &amp;quot;Scree Plot&amp;quot;,
       subtitle = &amp;quot;(find the &amp;#39;elbow&amp;#39;)&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;,
       x = &amp;quot;number of clusters&amp;quot;,
       y = &amp;quot;total-within-sum-of-squares&amp;quot;) +
  scale_x_discrete(name = &amp;quot;number of clusters&amp;quot;,
                   breaks = paste(1:9),
                   labels = paste(1:9),
                   limits = 1:9) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;conclusion&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;It appears that the optimal number of clusters for our data set is &lt;span class=&#34;math inline&#34;&gt;\(k = 3\)&lt;/span&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;items_with_clusters &amp;lt;- cbind(df_numerical, clusters3$cluster)
colnames(items_with_clusters) &amp;lt;- c(&amp;quot;ID&amp;quot;, &amp;quot;buy&amp;quot;, &amp;quot;sell&amp;quot;, &amp;quot;recipe&amp;quot;, &amp;quot;cluster&amp;quot;)
items_with_clusters$cluster &amp;lt;- factor(items_with_clusters$cluster)

df_categorical &amp;lt;- items %&amp;gt;%
  select(num_id, name, category) %&amp;gt;%
  filter(complete.cases(.))
colnames(df_categorical) &amp;lt;- c(&amp;quot;ID&amp;quot;, &amp;quot;name&amp;quot;, &amp;quot;category&amp;quot;)

main_df &amp;lt;- df_categorical %&amp;gt;%
  inner_join(items_with_clusters, by = &amp;quot;ID&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;main_df %&amp;gt;%
  ggplot(group = cluster) +
  geom_point(aes(x = buy, y = sell, color = cluster), size = 3) +
  coord_trans(x = &amp;quot;log10&amp;quot;) +
  labs(title = &amp;quot;Items in Animal Crossing&amp;quot;,
       subtitle = &amp;quot;Optimal Clustering&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;) +
  scale_x_continuous(name = &amp;quot;Buy Value&amp;quot;,
                     breaks = x_breaks,
                     labels = paste(x_breaks)) +
  scale_y_continuous(name = &amp;quot;Sell Value&amp;quot;,
                     breaks = y_breaks,
                     labels = paste(y_breaks)) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-13-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;appendix-label-a-sample-of-points-from-each-cluster&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Appendix: label a sample of points from each cluster&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;label_df &amp;lt;- main_df %&amp;gt;%
  group_by(cluster) %&amp;gt;%
  sample_n(2)

main_df %&amp;gt;%
  ggplot(group = cluster) +
  geom_point(aes(x = buy, y = sell, color = cluster), size = 3) +
  geom_label_repel(aes(x = buy, y = sell, label = name), 
                   data = label_df,
                   nudge_x = -1000,
                   nudge_y = 10000) +
  coord_trans(x = &amp;quot;log10&amp;quot;) +
  labs(title = &amp;quot;Items in Animal Crossing&amp;quot;,
       subtitle = &amp;quot;Optimal Clustering&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;) +
  scale_x_continuous(name = &amp;quot;Buy Value&amp;quot;,
                     breaks = x_breaks,
                     labels = paste(x_breaks)) +
  scale_y_continuous(name = &amp;quot;Sell Value&amp;quot;,
                     breaks = y_breaks,
                     labels = paste(y_breaks)) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-14-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Introduction to Unsupervised Learning</title>
      <link>/post/introduction-to-unsupervised-learning/</link>
      <pubDate>Wed, 06 May 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/introduction-to-unsupervised-learning/</guid>
      <description>

&lt;h1 id=&#34;unsupervised-learning&#34;&gt;Unsupervised Learning&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Supervised learning&lt;/strong&gt; has the goal of making predictions with a set of &lt;em&gt;known&lt;/em&gt; labels for the response variable.&lt;/li&gt;
&lt;li&gt;In &lt;strong&gt;unsupervised learning&lt;/strong&gt;, we try to find structure in the data of the response variable without predetermined labels.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Goal: organize the items available in the &lt;code&gt;Animal Crossing&lt;/code&gt; video game&lt;/p&gt;

&lt;h1 id=&#34;data-set-animal-crossing&#34;&gt;Data set: Animal Crossing&lt;/h1&gt;

&lt;p&gt;Source:  VillagerDB, MetaCritic, and TidyTuesday&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-05-05/readme.md&#34; target=&#34;_blank&#34;&gt;Animal Crossing Tidy Tuesday&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(&amp;quot;ggrepel&amp;quot;)
library(&amp;quot;tidyverse&amp;quot;)

# critic &amp;lt;- readr::read_tsv(&#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/critic.tsv&#39;)
# user_reviews &amp;lt;- readr::read_tsv(&#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/user_reviews.tsv&#39;)
items &amp;lt;- readr::read_csv(&#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/items.csv&#39;)
# villagers &amp;lt;- readr::read_csv(&#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/villagers.csv&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;exploratory-data-analysis&#34;&gt;Exploratory Data Analysis&lt;/h1&gt;

&lt;h2 id=&#34;variables&#34;&gt;variables&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;dim(items)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;## [1] 4565   16
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;str(items)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;## tibble [4,565 x 16] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ num_id       : num [1:4565] 12 14 17 19 20 21 23 24 26 26 ...
##  $ id           : chr [1:4565] &amp;quot;3d-glasses&amp;quot; &amp;quot;a-tee&amp;quot; &amp;quot;abstract-wall&amp;quot; &amp;quot;academy-uniform&amp;quot; ...
##  $ name         : chr [1:4565] &amp;quot;3D Glasses&amp;quot; &amp;quot;A Tee&amp;quot; &amp;quot;Abstract Wall&amp;quot; &amp;quot;Academy Uniform&amp;quot; ...
##  $ category     : chr [1:4565] &amp;quot;Accessories&amp;quot; &amp;quot;Tops&amp;quot; &amp;quot;Wallpaper&amp;quot; &amp;quot;Dresses&amp;quot; ...
##  $ orderable    : logi [1:4565] NA NA TRUE NA FALSE TRUE ...
##  $ sell_value   : num [1:4565] 122 140 390 520 2000 375 420 330 8990 8990 ...
##  $ sell_currency: chr [1:4565] &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; ...
##  $ buy_value    : num [1:4565] 490 560 1560 2080 NA ...
##  $ buy_currency : chr [1:4565] &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; &amp;quot;bells&amp;quot; ...
##  $ sources      : chr [1:4565] NA NA &amp;quot;Nook&#39;s Cranny&amp;quot; NA ...
##  $ customizable : logi [1:4565] NA NA NA NA NA FALSE ...
##  $ recipe       : num [1:4565] NA NA NA NA NA NA NA NA NA NA ...
##  $ recipe_id    : chr [1:4565] NA NA NA NA ...
##  $ games_id     : chr [1:4565] &amp;quot;nh&amp;quot; &amp;quot;nh&amp;quot; &amp;quot;nh&amp;quot; &amp;quot;nh&amp;quot; ...
##  $ id_full      : chr [1:4565] &amp;quot;item-3d-glasses&amp;quot; &amp;quot;item-a-tee&amp;quot; NA &amp;quot;item-academy-uniform&amp;quot; ...
##  $ image_url    : chr [1:4565] &amp;quot;https://villagerdb.com/images/items/full/3d-glasses.b8e1b5a.png&amp;quot; &amp;quot;https://villagerdb.com/images/items/full/a-tee.a1af443.png&amp;quot; NA &amp;quot;https://villagerdb.com/images/items/full/academy-uniform.4475eb5.png&amp;quot; ...
##  - attr(*, &amp;quot;problems&amp;quot;)= tibble [2 x 5] (S3: tbl_df/tbl/data.frame)
##   ..$ row     : int [1:2] 4472 4473
##   ..$ col     : chr [1:2] &amp;quot;customizable&amp;quot; &amp;quot;customizable&amp;quot;
##   ..$ expected: chr [1:2] &amp;quot;1/0/T/F/TRUE/FALSE&amp;quot; &amp;quot;1/0/T/F/TRUE/FALSE&amp;quot;
##   ..$ actual  : chr [1:2] &amp;quot;Yes&amp;quot; &amp;quot;Yes&amp;quot;
##   ..$ file    : chr [1:2] &amp;quot;&#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/items.csv&#39;&amp;quot; &amp;quot;&#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/items.csv&#39;&amp;quot;
##  - attr(*, &amp;quot;spec&amp;quot;)=
##   .. cols(
##   ..   num_id = col_double(),
##   ..   id = col_character(),
##   ..   name = col_character(),
##   ..   category = col_character(),
##   ..   orderable = col_logical(),
##   ..   sell_value = col_double(),
##   ..   sell_currency = col_character(),
##   ..   buy_value = col_double(),
##   ..   buy_currency = col_character(),
##   ..   sources = col_character(),
##   ..   customizable = col_logical(),
##   ..   recipe = col_double(),
##   ..   recipe_id = col_character(),
##   ..   games_id = col_character(),
##   ..   id_full = col_character(),
##   ..   image_url = col_character()
##   .. )
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;table(items$category)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;## 
## Accessories     Bottoms        Bugs     Dresses        Fish    Flooring 
##         123         142          80         239         101         324 
##     Flowers     Fossils       Fruit   Furniture        Hats       Music 
##         109          76          12        1264         230          95 
##      Photos   Seashells       Shoes       Socks       Tools        Tops 
##         840           8          89          60          74         289 
##   Umbrellas     Usables   Wallpaper 
##          67          88         255
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;summary(items$buy_value)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##      40     870    1300    6960    2700 1200000    1014
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# table(items$buy_currency)
summary(items$sell_value)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##       5     240     390    2261    1000  300000      36
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;summary(items$num_id)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##      12    1722    3569    3662    5607    7443
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;summary(items$recipe)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   1.000   2.000   3.000   4.711   6.000  90.000    3977
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;numerical-variables&#34;&gt;numerical variables&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;items %&amp;gt;%
  ggplot(aes(x = buy_value, y = sell_value, color = category)) +
  geom_point() +
  coord_trans(x = &amp;quot;log10&amp;quot;) + 
  labs(title = &amp;quot;Items in Animal Crossing&amp;quot;,
       subtitle = &amp;quot;Sell Values vs Buy Values&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;) +
  scale_x_continuous(name = &amp;quot;Buy Value&amp;quot;,
                     breaks = c(0, 10, 100, 1000, 10000, 100000, 1000000),
                     labels = c(&amp;quot;0&amp;quot;, &amp;quot;10&amp;quot;, &amp;quot;100&amp;quot;, &amp;quot;1000&amp;quot;, &amp;quot;10000&amp;quot;, &amp;quot;100000&amp;quot;, &amp;quot;1000000&amp;quot;)) +
  scale_y_continuous(name = &amp;quot;Sell Value&amp;quot;,
                     breaks = c(0, 50000, 100000, 150000, 200000, 250000, 300000),
                     labels = c(&amp;quot;0&amp;quot;, &amp;quot;50000&amp;quot;, &amp;quot;100000&amp;quot;, &amp;quot;150000&amp;quot;, &amp;quot;200000&amp;quot;, &amp;quot;250000&amp;quot;, &amp;quot;300000&amp;quot;)) +
  theme_minimal()
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;## Warning: Removed 1035 rows containing missing values (geom_point).
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;

&lt;h1 id=&#34;k-means-clustering&#34;&gt;K-Means Clustering&lt;/h1&gt;

&lt;h2 id=&#34;first-look&#34;&gt;first look&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;df_numerical &amp;lt;- items %&amp;gt;%
  select(num_id, buy_value, sell_value, recipe) %&amp;gt;%
  filter(complete.cases(.))

summary(df_numerical$buy_value)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##     240    3780    7080   16912   16480  320000
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;summary(df_numerical$sell_value)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##      60     945    1770    4228    4120   80000
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;clusters4 &amp;lt;- kmeans(df_numerical, 4)

items_with_clusters &amp;lt;- cbind(df_numerical, clusters4$cluster)
colnames(items_with_clusters) &amp;lt;- c(&amp;quot;ID&amp;quot;, &amp;quot;buy&amp;quot;, &amp;quot;sell&amp;quot;, &amp;quot;recipe&amp;quot;, &amp;quot;cluster&amp;quot;)
items_with_clusters$cluster &amp;lt;- factor(items_with_clusters$cluster)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;x_breaks &amp;lt;- c(0, 10, 100, 1000, 10000, 100000, 1000000)
y_breaks &amp;lt;- c(0, 10000, 20000, 30000, 40000, 50000, 60000, 70000, 80000)

items_with_clusters %&amp;gt;%
  ggplot() +
  geom_point(aes(x = buy, y = sell)) +
  geom_point(aes(x = buy_value, y = sell_value), 
             data = data.frame(clusters4$centers),
             size = 5,
             color = &amp;quot;blue&amp;quot;) +
  coord_trans(x = &amp;quot;log10&amp;quot;) +
  labs(title = &amp;quot;Items in Animal Crossing&amp;quot;,
       subtitle = &amp;quot;Cluster Centers&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;) +
  scale_x_continuous(name = &amp;quot;Buy Value&amp;quot;,
                     breaks = x_breaks,
                     labels = paste(x_breaks)) +
  scale_y_continuous(name = &amp;quot;Sell Value&amp;quot;,
                     breaks = y_breaks,
                     labels = paste(y_breaks)) +
  theme_minimal()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;items_with_clusters %&amp;gt;%
  ggplot(group = cluster) +
  geom_point(aes(x = buy, y = sell, color = cluster), size = 3) +
  coord_trans(x = &amp;quot;log10&amp;quot;) +
  labs(title = &amp;quot;Items in Animal Crossing&amp;quot;,
       subtitle = &amp;quot;4 Clusters&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;) +
  scale_x_continuous(name = &amp;quot;Buy Value&amp;quot;,
                     breaks = x_breaks,
                     labels = paste(x_breaks)) +
  scale_y_continuous(name = &amp;quot;Sell Value&amp;quot;,
                     breaks = y_breaks,
                     labels = paste(y_breaks)) +
  theme_minimal()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;selecting-the-amount-of-clusters&#34;&gt;selecting the amount of clusters&lt;/h2&gt;

&lt;p&gt;Selecting the number of clusters is rather subjective.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;too few clusters: items that are &amp;ldquo;far&amp;rdquo; from each other are still grouped together&lt;/li&gt;
&lt;li&gt;too many clusters: harder to describe and label groups later&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;We start with an $d$-dimensional data set of numerical variables and prescribe a number $k$ for the number of clusters and run the &lt;code&gt;kmeans&lt;/code&gt; algorithm.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Each cluster $C&lt;em&gt;{k}$ has $n&lt;/em&gt;{k}$ points labeled $x_{i}$ in $d$-dimensional space&lt;/li&gt;
&lt;li&gt;Each cluster has a cluster center $\mu_{k}$&lt;/li&gt;
&lt;li&gt;Each cluster has a &lt;em&gt;within-sum-of-squares&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;$$WSS = \displaystyle\sum&lt;em&gt;{x&lt;/em&gt;{i} \in C&lt;em&gt;{k}} (x&lt;/em&gt;{i} - \mu_{k})^{2}$$
Thus, our metric for the clustering will be the reported &lt;em&gt;total-within-sum-of-squares&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;$$TWSS = \displaystyle\sum&lt;em&gt;{j=1}^{k}\sum&lt;/em&gt;{x&lt;em&gt;{i} \in C&lt;/em&gt;{k}} (x&lt;em&gt;{i} - \mu&lt;/em&gt;{k})^{2}$$
For example, the total-within-sum-of-squares for the 4-cluster results above is 3.1486354\times 10^{10}.&lt;/p&gt;

&lt;h2 id=&#34;scree-plot&#34;&gt;scree plot&lt;/h2&gt;

&lt;p&gt;It is common practice to build a &lt;em&gt;scree plot&lt;/em&gt; and look for the &amp;ldquo;elbow&amp;rdquo;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;clusters1 &amp;lt;- kmeans(df_numerical, 1)
clusters2 &amp;lt;- kmeans(df_numerical, 2)
clusters3 &amp;lt;- kmeans(df_numerical, 3)
clusters4 &amp;lt;- kmeans(df_numerical, 4)
clusters5 &amp;lt;- kmeans(df_numerical, 5)
clusters6 &amp;lt;- kmeans(df_numerical, 6)
clusters7 &amp;lt;- kmeans(df_numerical, 7)
clusters8 &amp;lt;- kmeans(df_numerical, 8)
clusters9 &amp;lt;- kmeans(df_numerical, 9)

TSS_vector &amp;lt;- c(clusters1$tot.withinss, clusters2$tot.withinss, clusters3$tot.withinss, 
                clusters4$tot.withinss, clusters5$tot.withinss, clusters6$tot.withinss, 
                clusters7$tot.withinss, clusters8$tot.withinss, clusters9$tot.withinss)

k_vals &amp;lt;- 1:9
df_for_scree_plot &amp;lt;- data.frame(k_vals, TSS_vector)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;df_for_scree_plot %&amp;gt;%
  ggplot(aes(x = k_vals, y = TSS_vector)) +
  geom_point(size = 3) +
  geom_line() +
  labs(title = &amp;quot;Scree Plot&amp;quot;,
       subtitle = &amp;quot;(find the &#39;elbow&#39;)&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;,
       x = &amp;quot;number of clusters&amp;quot;,
       y = &amp;quot;total-within-sum-of-squares&amp;quot;) +
  scale_x_discrete(name = &amp;quot;number of clusters&amp;quot;,
                   breaks = paste(1:9),
                   labels = paste(1:9),
                   limits = 1:9) +
  theme_minimal()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;

&lt;h1 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;It appears that the optimal number of clusters for our data set is $k = 3$.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;items_with_clusters &amp;lt;- cbind(df_numerical, clusters3$cluster)
colnames(items_with_clusters) &amp;lt;- c(&amp;quot;ID&amp;quot;, &amp;quot;buy&amp;quot;, &amp;quot;sell&amp;quot;, &amp;quot;recipe&amp;quot;, &amp;quot;cluster&amp;quot;)
items_with_clusters$cluster &amp;lt;- factor(items_with_clusters$cluster)

df_categorical &amp;lt;- items %&amp;gt;%
  select(num_id, name, category) %&amp;gt;%
  filter(complete.cases(.))
colnames(df_categorical) &amp;lt;- c(&amp;quot;ID&amp;quot;, &amp;quot;name&amp;quot;, &amp;quot;category&amp;quot;)

main_df &amp;lt;- df_categorical %&amp;gt;%
  inner_join(items_with_clusters, by = &amp;quot;ID&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;main_df %&amp;gt;%
  ggplot(group = cluster) +
  geom_point(aes(x = buy, y = sell, color = cluster), size = 3) +
  coord_trans(x = &amp;quot;log10&amp;quot;) +
  labs(title = &amp;quot;Items in Animal Crossing&amp;quot;,
       subtitle = &amp;quot;Optimal Clustering&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;) +
  scale_x_continuous(name = &amp;quot;Buy Value&amp;quot;,
                     breaks = x_breaks,
                     labels = paste(x_breaks)) +
  scale_y_continuous(name = &amp;quot;Sell Value&amp;quot;,
                     breaks = y_breaks,
                     labels = paste(y_breaks)) +
  theme_minimal()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-13-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;

&lt;h1 id=&#34;appendix-label-a-sample-of-points-from-each-cluster&#34;&gt;Appendix: label a sample of points from each cluster&lt;/h1&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;label_df &amp;lt;- main_df %&amp;gt;%
  group_by(cluster) %&amp;gt;%
  sample_n(2)

main_df %&amp;gt;%
  ggplot(group = cluster) +
  geom_point(aes(x = buy, y = sell, color = cluster), size = 3) +
  geom_label_repel(aes(x = buy, y = sell, label = name), 
                   data = label_df,
                   nudge_x = -1000,
                   nudge_y = 10000) +
  coord_trans(x = &amp;quot;log10&amp;quot;) +
  labs(title = &amp;quot;Items in Animal Crossing&amp;quot;,
       subtitle = &amp;quot;Optimal Clustering&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;) +
  scale_x_continuous(name = &amp;quot;Buy Value&amp;quot;,
                     breaks = x_breaks,
                     labels = paste(x_breaks)) +
  scale_y_continuous(name = &amp;quot;Sell Value&amp;quot;,
                     breaks = y_breaks,
                     labels = paste(y_breaks)) +
  theme_minimal()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;2020-05-06-introduction-to-unsupervised-learning_files/figure-html/unnamed-chunk-14-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Supervised Learning</title>
      <link>/post/supervised-learning/</link>
      <pubDate>Mon, 04 May 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/supervised-learning/</guid>
      <description>&lt;div id=&#34;supervised-learning&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Supervised Learning&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Supervised learning&lt;/strong&gt; has the goal of making predictions with a set of &lt;em&gt;known&lt;/em&gt; labels for the response variable.&lt;/li&gt;
&lt;li&gt;In &lt;strong&gt;unsupervised learning&lt;/strong&gt;, we try to find structure in the data of the response variable without predetermined labels.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Goal: predict the personality type of each character in Animal Crossing&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;data-set-animal-crossing&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data set: Animal Crossing&lt;/h1&gt;
&lt;p&gt;Source: VillagerDB, MetaCritic, and TidyTuesday&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-05-05/readme.md&#34;&gt;Animal Crossing Tidy Tuesday&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(&amp;quot;caret&amp;quot;)
library(&amp;quot;randomForest&amp;quot;)
library(&amp;quot;tidymodels&amp;quot;)
library(&amp;quot;tidyverse&amp;quot;)

# critic &amp;lt;- readr::read_tsv(&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/critic.tsv&amp;#39;)
# user_reviews &amp;lt;- readr::read_tsv(&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/user_reviews.tsv&amp;#39;)
# items &amp;lt;- readr::read_csv(&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/items.csv&amp;#39;)
villagers &amp;lt;- readr::read_csv(&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/villagers.csv&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;exploratory-data-analysis&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Exploratory Data Analysis&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dim(villagers)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 391  11&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(villagers)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## tibble [391 x 11] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ row_n      : num [1:391] 2 3 4 6 7 8 9 10 11 13 ...
##  $ id         : chr [1:391] &amp;quot;admiral&amp;quot; &amp;quot;agent-s&amp;quot; &amp;quot;agnes&amp;quot; &amp;quot;al&amp;quot; ...
##  $ name       : chr [1:391] &amp;quot;Admiral&amp;quot; &amp;quot;Agent S&amp;quot; &amp;quot;Agnes&amp;quot; &amp;quot;Al&amp;quot; ...
##  $ gender     : chr [1:391] &amp;quot;male&amp;quot; &amp;quot;female&amp;quot; &amp;quot;female&amp;quot; &amp;quot;male&amp;quot; ...
##  $ species    : chr [1:391] &amp;quot;bird&amp;quot; &amp;quot;squirrel&amp;quot; &amp;quot;pig&amp;quot; &amp;quot;gorilla&amp;quot; ...
##  $ birthday   : chr [1:391] &amp;quot;1-27&amp;quot; &amp;quot;7-2&amp;quot; &amp;quot;4-21&amp;quot; &amp;quot;10-18&amp;quot; ...
##  $ personality: chr [1:391] &amp;quot;cranky&amp;quot; &amp;quot;peppy&amp;quot; &amp;quot;uchi&amp;quot; &amp;quot;lazy&amp;quot; ...
##  $ song       : chr [1:391] &amp;quot;Steep Hill&amp;quot; &amp;quot;DJ K.K.&amp;quot; &amp;quot;K.K. House&amp;quot; &amp;quot;Steep Hill&amp;quot; ...
##  $ phrase     : chr [1:391] &amp;quot;aye aye&amp;quot; &amp;quot;sidekick&amp;quot; &amp;quot;snuffle&amp;quot; &amp;quot;Ayyeeee&amp;quot; ...
##  $ full_id    : chr [1:391] &amp;quot;villager-admiral&amp;quot; &amp;quot;villager-agent-s&amp;quot; &amp;quot;villager-agnes&amp;quot; &amp;quot;villager-al&amp;quot; ...
##  $ url        : chr [1:391] &amp;quot;https://villagerdb.com/images/villagers/thumb/admiral.98206ee.png&amp;quot; &amp;quot;https://villagerdb.com/images/villagers/thumb/agent-s.96c789b.png&amp;quot; &amp;quot;https://villagerdb.com/images/villagers/thumb/agnes.9f51f32.png&amp;quot; &amp;quot;https://villagerdb.com/images/villagers/thumb/al.1e17090.png&amp;quot; ...
##  - attr(*, &amp;quot;spec&amp;quot;)=
##   .. cols(
##   ..   row_n = col_double(),
##   ..   id = col_character(),
##   ..   name = col_character(),
##   ..   gender = col_character(),
##   ..   species = col_character(),
##   ..   birthday = col_character(),
##   ..   personality = col_character(),
##   ..   song = col_character(),
##   ..   phrase = col_character(),
##   ..   full_id = col_character(),
##   ..   url = col_character()
##   .. )&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#table(villagers$name)
#length(unique(villagers$name))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;table(villagers$personality)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## cranky   jock   lazy normal  peppy   smug snooty   uchi 
##     55     55     60     59     49     34     55     24&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;personality-across-gender&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Personality across Gender&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;villagers %&amp;gt;%
  ggplot(aes(x = personality, fill = gender)) +
  geom_bar(stat = &amp;quot;count&amp;quot;, position = &amp;quot;dodge&amp;quot;) +
  labs(title = &amp;quot;Getting to Know the Animal Crossing Villagers&amp;quot;,
       subtitle = &amp;quot;and judging their personalities&amp;quot;,
       caption = &amp;quot;Source: VillagerDB&amp;quot;) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-04-supervised-learning_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;personality-across-species&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Personality across Species&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;villagers %&amp;gt;%
  ggplot(aes(x = personality, fill = species)) +
  geom_bar(stat = &amp;quot;count&amp;quot;, position = &amp;quot;stack&amp;quot;) +
  labs(title = &amp;quot;Getting to Know the Animal Crossing Villagers&amp;quot;,
       subtitle = &amp;quot;and judging their personalities&amp;quot;,
       caption = &amp;quot;Source: VillagerDB&amp;quot;) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-04-supervised-learning_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;predictor-variables&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Predictor Variables&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;table(villagers$gender)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## female   male 
##    187    204&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;table(villagers$species)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## alligator  anteater      bear      bird      bull       cat   chicken       cow 
##         7         7        15        13         6        23         9         4 
##       cub      deer       dog      duck     eagle  elephant      frog      goat 
##        16        10        16        17         9        11        18         8 
##   gorilla   hamster     hippo     horse  kangaroo     koala      lion    monkey 
##         9         8         7        15         8         9         7         8 
##     mouse   octopus   ostrich   penguin       pig    rabbit     rhino     sheep 
##        15         3        10        13        15        20         6        13 
##  squirrel     tiger      wolf 
##        18         7        11&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;extracting-birth-month&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Extracting Birth Month&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;villagers &amp;lt;- villagers %&amp;gt;%
  separate(birthday, c(&amp;quot;birth_month&amp;quot;, &amp;quot;birth_day&amp;quot;), remove = FALSE)

villagers$birth_month_factor &amp;lt;- factor(villagers$birth_month, 
                                levels = 1:12)

table(villagers$birth_month_factor)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
##  1  2  3  4  5  6  7  8  9 10 11 12 
## 32 29 33 29 31 33 35 36 32 37 30 34&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;villagers %&amp;gt;%
  ggplot(aes(x = personality, fill = birth_month_factor)) +
  geom_bar(color = &amp;quot;black&amp;quot;, stat = &amp;quot;count&amp;quot;, position = &amp;quot;stack&amp;quot;) +
  labs(title = &amp;quot;Getting to Know the Animal Crossing Villagers&amp;quot;,
       subtitle = &amp;quot;and judging their personalities&amp;quot;,
       caption = &amp;quot;Source: VillagerDB&amp;quot;) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-04-supervised-learning_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;villagers %&amp;gt;%
  ggplot(aes(x = personality, fill = birth_month_factor)) +
  geom_bar(color = &amp;quot;black&amp;quot;, stat = &amp;quot;count&amp;quot;, position = &amp;quot;fill&amp;quot;) +
  labs(title = &amp;quot;Getting to Know the Animal Crossing Villagers&amp;quot;,
       subtitle = &amp;quot;and judging their personalities&amp;quot;,
       caption = &amp;quot;Source: VillagerDB&amp;quot;,
       y = &amp;quot;proportion&amp;quot;) +
  scale_fill_manual(name = &amp;quot;Month of Birth&amp;quot;,
                    labels = c(&amp;quot;January&amp;quot;, &amp;quot;February&amp;quot;, &amp;quot;March&amp;quot;, &amp;quot;April&amp;quot;,
                                 &amp;quot;May&amp;quot;, &amp;quot;June&amp;quot;, &amp;quot;July&amp;quot;, &amp;quot;August&amp;quot;,
                                 &amp;quot;September&amp;quot;, &amp;quot;October&amp;quot;, &amp;quot;November&amp;quot;, &amp;quot;December&amp;quot;),
                    values=sample(c(&amp;quot;#4b48c9&amp;quot;, &amp;quot;#5c90a8&amp;quot;, &amp;quot;#86d5fe&amp;quot;, &amp;quot;#c0d1ef&amp;quot;,
                             &amp;quot;#edd1a2&amp;quot;, &amp;quot;#948572&amp;quot;, &amp;quot;#f8c79e&amp;quot;, &amp;quot;#eec688&amp;quot;,
                             &amp;quot;#642200&amp;quot;, &amp;quot;#764936&amp;quot;, &amp;quot;#fd974d&amp;quot;, &amp;quot;#7b4a3c&amp;quot;))) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-04-supervised-learning_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;(color palette generated at &lt;a href=&#34;http://www.cssdrive.com/imagepalette/index.php&#34;&gt;CSS Drive&lt;/a&gt;)&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;model-formula&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;model formula&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;response variable: &lt;code&gt;personality&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;predictor variables: &lt;code&gt;gender&lt;/code&gt;, &lt;code&gt;species&lt;/code&gt;, &lt;code&gt;birth_month&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;model formula: &lt;code&gt;personality ~ gender + species + birth_month&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;predictor_variables &amp;lt;- c(&amp;quot;gender&amp;quot;, &amp;quot;species&amp;quot;, &amp;quot;birth_month&amp;quot;)
model_formula &amp;lt;- paste(&amp;quot;personality~&amp;quot;, paste(sprintf(&amp;quot;`%s`&amp;quot;, predictor_variables), collapse=&amp;quot;+&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;data-split&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data Split&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;villagers_split &amp;lt;- initial_split(villagers)
villagers_train &amp;lt;- training(villagers_split)
villagers_test  &amp;lt;- testing(villagers_split)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;random-forests&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Random Forests&lt;/h1&gt;
&lt;p&gt;“Random forest models are ensembles of decision trees. A large number of decision tree models are created for the ensemble based on slightly different versions of the training set. When creating the individual decision trees, the fitting process encourages them to be as diverse as possible. The collection of trees are combined into the random forest model and, when a new sample is predicted, the votes from each tree are used to calculate the final predicted value for the new sample.”
—&lt;a href=&#34;https://www.tidymodels.org/start/resampling/&#34;&gt;tidymodels.org&lt;/a&gt;&lt;/p&gt;
&lt;div id=&#34;define-the-forest&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Define the Forest&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;random_forest_model &amp;lt;- 
  rand_forest(trees = 1000) %&amp;gt;% 
  set_engine(&amp;quot;ranger&amp;quot;) %&amp;gt;% 
  set_mode(&amp;quot;classification&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;fitting-the-forest&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Fitting the Forest&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# CAUTION: at the time of filming, this code chunk did not work (model formula parser threw an error)
random_forest_fit &amp;lt;-
  random_forest_model %&amp;gt;%
  fit(personality ~ gender + species + birth_month, data = villagers_train)

random_forest_fit&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;visualizing-the-forest&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Visualizing the Forest&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# OLD-FASHIONED WAY with the caret package
model_rf &amp;lt;- caret::train(personality ~ gender + species + birth_month,
                         data = villagers_train, method = &amp;quot;rf&amp;quot;)
model_rf&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Random Forest 
## 
## 294 samples
##   3 predictor
##   8 classes: &amp;#39;cranky&amp;#39;, &amp;#39;jock&amp;#39;, &amp;#39;lazy&amp;#39;, &amp;#39;normal&amp;#39;, &amp;#39;peppy&amp;#39;, &amp;#39;smug&amp;#39;, &amp;#39;snooty&amp;#39;, &amp;#39;uchi&amp;#39; 
## 
## No pre-processing
## Resampling: Bootstrapped (25 reps) 
## Summary of sample sizes: 294, 294, 294, 294, 294, 294, ... 
## Resampling results across tuning parameters:
## 
##   mtry  Accuracy   Kappa    
##    2    0.2550533  0.1357101
##   24    0.2889225  0.1759381
##   46    0.2892118  0.1774835
## 
## Accuracy was used to select the optimal model using the largest value.
## The final value used for the model was mtry = 46.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;model_rpart &amp;lt;- caret::train(personality ~ gender + species + birth_month,
                         data = villagers_train, method = &amp;quot;rpart&amp;quot;)
model_rpart&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## CART 
## 
## 294 samples
##   3 predictor
##   8 classes: &amp;#39;cranky&amp;#39;, &amp;#39;jock&amp;#39;, &amp;#39;lazy&amp;#39;, &amp;#39;normal&amp;#39;, &amp;#39;peppy&amp;#39;, &amp;#39;smug&amp;#39;, &amp;#39;snooty&amp;#39;, &amp;#39;uchi&amp;#39; 
## 
## No pre-processing
## Resampling: Bootstrapped (25 reps) 
## Summary of sample sizes: 294, 294, 294, 294, 294, 294, ... 
## Resampling results across tuning parameters:
## 
##   cp          Accuracy   Kappa     
##   0.02024291  0.2975188  0.18582216
##   0.02429150  0.2876263  0.17374970
##   0.19028340  0.2017836  0.07541971
## 
## Accuracy was used to select the optimal model using the largest value.
## The final value used for the model was cp = 0.02024291.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#source:  https://shiring.github.io/machine_learning/2017/03/16/rf_plot_ggraph

library(&amp;quot;ggraph&amp;quot;)
library(&amp;quot;igraph&amp;quot;)

tree_func &amp;lt;- function(final_model, 
                      tree_num) {
  
  # get tree by index
  tree &amp;lt;- randomForest::getTree(final_model, 
                                k = tree_num, 
                                labelVar = TRUE) %&amp;gt;%
    tibble::rownames_to_column() %&amp;gt;%
    # make leaf split points to NA, so the 0s won&amp;#39;t get plotted
    mutate(`split point` = ifelse(is.na(prediction), `split point`, NA))
  
  # prepare data frame for graph
  graph_frame &amp;lt;- data.frame(from = rep(tree$rowname, 2),
                            to = c(tree$`left daughter`, tree$`right daughter`))
  
  # convert to graph and delete the last node that we don&amp;#39;t want to plot
  graph &amp;lt;- graph_from_data_frame(graph_frame) %&amp;gt;%
    delete_vertices(&amp;quot;0&amp;quot;)
  
  # set node labels
  V(graph)$node_label &amp;lt;- gsub(&amp;quot;_&amp;quot;, &amp;quot; &amp;quot;, as.character(tree$`split var`))
  V(graph)$leaf_label &amp;lt;- as.character(tree$prediction)
  V(graph)$split &amp;lt;- as.character(round(tree$`split point`, digits = 2))
  
  # plot
  plot &amp;lt;- ggraph(graph, &amp;#39;dendrogram&amp;#39;) + 
    theme_bw() +
    geom_edge_link() +
    geom_node_point() +
    geom_node_text(aes(label = node_label), na.rm = TRUE, repel = TRUE) +
    geom_node_label(aes(label = split), vjust = 2.5, na.rm = TRUE, fill = &amp;quot;white&amp;quot;) +
    geom_node_label(aes(label = leaf_label, fill = leaf_label), na.rm = TRUE, 
                    repel = TRUE, colour = &amp;quot;white&amp;quot;, fontface = &amp;quot;bold&amp;quot;, show.legend = FALSE) +
    theme(panel.grid.minor = element_blank(),
          panel.grid.major = element_blank(),
          panel.background = element_blank(),
          plot.background = element_rect(fill = &amp;quot;white&amp;quot;),
          panel.border = element_blank(),
          axis.line = element_blank(),
          axis.text.x = element_blank(),
          axis.text.y = element_blank(),
          axis.ticks = element_blank(),
          axis.title.x = element_blank(),
          axis.title.y = element_blank(),
          plot.title = element_text(size = 18))
  
  print(plot)
}

tree_num &amp;lt;- which(model_rf$finalModel$forest$ndbigtree == min(model_rf$finalModel$forest$ndbigtree))

tree_func(final_model = model_rf$finalModel, tree_num)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-04-supervised-learning_files/figure-html/unnamed-chunk-17-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;predictions&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Predictions&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;predictions &amp;lt;- predict(model_rf, newdata = villagers_test)
confusionMatrix(predictions, factor(villagers_test$personality))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Confusion Matrix and Statistics
## 
##           Reference
## Prediction cranky jock lazy normal peppy smug snooty uchi
##     cranky      5    1    0      0     0    1      0    0
##     jock        1   10    2      0     0    2      0    0
##     lazy        0    5   13      0     0    2      0    0
##     normal      0    0    0     12     1    0      1    2
##     peppy       0    0    0      2     9    0      3    0
##     smug        0    1    0      0     0    3      0    0
##     snooty      0    0    0      3     0    0     13    2
##     uchi        0    0    0      0     0    0      0    3
## 
## Overall Statistics
##                                           
##                Accuracy : 0.701           
##                  95% CI : (0.5996, 0.7898)
##     No Information Rate : 0.1753          
##     P-Value [Acc &amp;gt; NIR] : &amp;lt; 2.2e-16       
##                                           
##                   Kappa : 0.6502          
##                                           
##  Mcnemar&amp;#39;s Test P-Value : NA              
## 
## Statistics by Class:
## 
##                      Class: cranky Class: jock Class: lazy Class: normal
## Sensitivity                0.83333      0.5882      0.8667        0.7059
## Specificity                0.97802      0.9375      0.9146        0.9500
## Pos Pred Value             0.71429      0.6667      0.6500        0.7500
## Neg Pred Value             0.98889      0.9146      0.9740        0.9383
## Prevalence                 0.06186      0.1753      0.1546        0.1753
## Detection Rate             0.05155      0.1031      0.1340        0.1237
## Detection Prevalence       0.07216      0.1546      0.2062        0.1649
## Balanced Accuracy          0.90568      0.7629      0.8907        0.8279
##                      Class: peppy Class: smug Class: snooty Class: uchi
## Sensitivity               0.90000     0.37500        0.7647     0.42857
## Specificity               0.94253     0.98876        0.9375     1.00000
## Pos Pred Value            0.64286     0.75000        0.7222     1.00000
## Neg Pred Value            0.98795     0.94624        0.9494     0.95745
## Prevalence                0.10309     0.08247        0.1753     0.07216
## Detection Rate            0.09278     0.03093        0.1340     0.03093
## Detection Prevalence      0.14433     0.04124        0.1856     0.03093
## Balanced Accuracy         0.92126     0.68188        0.8511     0.71429&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Introduction to Machine Learning</title>
      <link>/post/introduction-to-machine-learning/</link>
      <pubDate>Fri, 01 May 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/introduction-to-machine-learning/</guid>
      <description>&lt;div id=&#34;goals-for-today&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Goals for today&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;introduce machine learning (ideas and terminology)&lt;/li&gt;
&lt;li&gt;introduce &lt;code&gt;tidymodels&lt;/code&gt; package&lt;/li&gt;
&lt;li&gt;practice with a &lt;code&gt;TidyTuesday&lt;/code&gt; data set&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(&amp;quot;tidymodels&amp;quot;)
library(&amp;quot;tidyverse&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;data-tour-de-france&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data: Tour de France&lt;/h1&gt;
&lt;p&gt;Source: &lt;a href=&#34;https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-04-07/readme.md&#34;&gt;TidyTuesday&lt;/a&gt; data set from April 7, 2020&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tdf_winners &amp;lt;- readr::read_csv(&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-04-07/tdf_winners.csv&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(tdf_winners)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;spec_tbl_df&amp;#39;, &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;: 106 obs. of  19 variables:
##  $ edition      : num  1 2 3 4 5 6 7 8 9 10 ...
##  $ start_date   : Date, format: &amp;quot;1903-07-01&amp;quot; &amp;quot;1904-07-02&amp;quot; ...
##  $ winner_name  : chr  &amp;quot;Maurice Garin&amp;quot; &amp;quot;Henri Cornet&amp;quot; &amp;quot;Louis Trousselier&amp;quot; &amp;quot;René Pottier&amp;quot; ...
##  $ winner_team  : chr  &amp;quot;La Française&amp;quot; &amp;quot;Conte&amp;quot; &amp;quot;Peugeot–Wolber&amp;quot; &amp;quot;Peugeot–Wolber&amp;quot; ...
##  $ distance     : num  2428 2428 2994 4637 4488 ...
##  $ time_overall : num  94.6 96.1 NA NA NA ...
##  $ time_margin  : num  2.99 2.27 NA NA NA ...
##  $ stage_wins   : num  3 1 5 5 2 5 6 4 2 3 ...
##  $ stages_led   : num  6 3 10 12 5 13 13 3 13 13 ...
##  $ height       : num  1.62 NA NA NA NA NA 1.78 NA NA NA ...
##  $ weight       : num  60 NA NA NA NA NA 88 NA NA NA ...
##  $ age          : num  32 19 24 27 24 25 22 22 26 23 ...
##  $ born         : Date, format: &amp;quot;1871-03-03&amp;quot; &amp;quot;1884-08-04&amp;quot; ...
##  $ died         : Date, format: &amp;quot;1957-02-19&amp;quot; &amp;quot;1941-03-18&amp;quot; ...
##  $ full_name    : chr  NA NA NA NA ...
##  $ nickname     : chr  &amp;quot;The Little Chimney-sweep&amp;quot; &amp;quot;Le rigolo (The joker)&amp;quot; &amp;quot;Levaloy / Trou-trou&amp;quot; NA ...
##  $ birth_town   : chr  &amp;quot;Arvier&amp;quot; &amp;quot;Desvres&amp;quot; &amp;quot;Paris&amp;quot; &amp;quot;Moret-sur-Loing&amp;quot; ...
##  $ birth_country: chr  &amp;quot;Italy&amp;quot; &amp;quot;France&amp;quot; &amp;quot;France&amp;quot; &amp;quot;France&amp;quot; ...
##  $ nationality  : chr  &amp;quot; France&amp;quot; &amp;quot; France&amp;quot; &amp;quot; France&amp;quot; &amp;quot; France&amp;quot; ...
##  - attr(*, &amp;quot;spec&amp;quot;)=
##   .. cols(
##   ..   edition = col_double(),
##   ..   start_date = col_date(format = &amp;quot;&amp;quot;),
##   ..   winner_name = col_character(),
##   ..   winner_team = col_character(),
##   ..   distance = col_double(),
##   ..   time_overall = col_double(),
##   ..   time_margin = col_double(),
##   ..   stage_wins = col_double(),
##   ..   stages_led = col_double(),
##   ..   height = col_double(),
##   ..   weight = col_double(),
##   ..   age = col_double(),
##   ..   born = col_date(format = &amp;quot;&amp;quot;),
##   ..   died = col_date(format = &amp;quot;&amp;quot;),
##   ..   full_name = col_character(),
##   ..   nickname = col_character(),
##   ..   birth_town = col_character(),
##   ..   birth_country = col_character(),
##   ..   nationality = col_character()
##   .. )&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;colnames(tdf_winners)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;edition&amp;quot;       &amp;quot;start_date&amp;quot;    &amp;quot;winner_name&amp;quot;   &amp;quot;winner_team&amp;quot;  
##  [5] &amp;quot;distance&amp;quot;      &amp;quot;time_overall&amp;quot;  &amp;quot;time_margin&amp;quot;   &amp;quot;stage_wins&amp;quot;   
##  [9] &amp;quot;stages_led&amp;quot;    &amp;quot;height&amp;quot;        &amp;quot;weight&amp;quot;        &amp;quot;age&amp;quot;          
## [13] &amp;quot;born&amp;quot;          &amp;quot;died&amp;quot;          &amp;quot;full_name&amp;quot;     &amp;quot;nickname&amp;quot;     
## [17] &amp;quot;birth_town&amp;quot;    &amp;quot;birth_country&amp;quot; &amp;quot;nationality&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;cleaning-data&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Cleaning Data&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df &amp;lt;- tdf_winners %&amp;gt;%
  select(c(distance, time_overall, 
           height, weight, age)) %&amp;gt;%
  filter(complete.cases(.)) %&amp;gt;%
  filter(height &amp;gt;= 1.7) %&amp;gt;%
  mutate(pace = distance / time_overall) %&amp;gt;%
  select(c(pace, height, weight, age))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dim(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 62  4&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;data-visualization&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data Visualization&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;%
  ggplot(aes(x = height, y = pace)) +
  geom_point(color = &amp;quot;blue&amp;quot;) +
  geom_smooth(method = &amp;quot;lm&amp;quot;, se = FALSE, color = &amp;quot;red&amp;quot;) +
  labs(title = &amp;quot;Are taller bicyclists faster?&amp;quot;,
       subtitle = &amp;quot;featuring Tour de France winners&amp;quot;,
       caption = &amp;quot;Source: TidyTuesday&amp;quot;,
       x = &amp;quot;height (meters)&amp;quot;,
       y = &amp;quot;pace (km/hr)&amp;quot;) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-01-introduction-to-machine-learning_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;%
  ggplot(aes(x = age, y = pace)) +
  geom_point(color = &amp;quot;blue&amp;quot;) +
  geom_smooth(method = &amp;quot;lm&amp;quot;, se = FALSE, color = &amp;quot;red&amp;quot;) +
  labs(title = &amp;quot;Are older bicyclists faster?&amp;quot;,
       subtitle = &amp;quot;featuring Tour de France winners&amp;quot;,
       caption = &amp;quot;Source: TidyTuesday&amp;quot;,
       x = &amp;quot;age&amp;quot;,
       y = &amp;quot;pace (km/hr)&amp;quot;) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-01-introduction-to-machine-learning_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;%
  ggplot(aes(x = weight, y = pace)) +
  geom_point(color = &amp;quot;blue&amp;quot;) +
  geom_smooth(method = &amp;quot;lm&amp;quot;, se = FALSE, color = &amp;quot;red&amp;quot;) +
  labs(title = &amp;quot;Are heavier bicyclists faster?&amp;quot;,
       subtitle = &amp;quot;featuring Tour de France winners&amp;quot;,
       caption = &amp;quot;Source: TidyTuesday&amp;quot;,
       x = &amp;quot;weight (kg)&amp;quot;,
       y = &amp;quot;pace (km/hr)&amp;quot;) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-01-introduction-to-machine-learning_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;first-model&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;First Model&lt;/h1&gt;
&lt;p&gt;“With tidymodels, we start by specifying the functional form of the model that we want using the &lt;code&gt;parsnip&lt;/code&gt; package.”&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;linear_reg()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Linear Regression Model Specification (regression)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;model-engine&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;model engine&lt;/h2&gt;
&lt;p&gt;“However, now that the type of model has been specified, a method for fitting or training the model can be stated using the engine. The engine value is often a mash-up of the software that can be used to fit or train the model as well as the estimation method.”&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;linear_reg() %&amp;gt;% 
  set_engine(&amp;quot;lm&amp;quot;) #linear model&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Linear Regression Model Specification (regression)
## 
## Computational engine: lm&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;fitting-a-model&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;fitting a model&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lm_fit &amp;lt;- linear_reg() %&amp;gt;% 
  set_engine(&amp;quot;lm&amp;quot;) %&amp;gt;%
  fit(pace ~ height + weight + age, data = df)
lm_fit&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## parsnip model object
## 
## Fit time:  0ms 
## 
## Call:
## stats::lm(formula = formula, data = data)
## 
## Coefficients:
## (Intercept)       height       weight          age  
##      3.8455      21.0987      -0.1387       0.2113&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;examining-a-model&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;examining a model&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tidy(lm_fit)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 4 x 5
##   term        estimate std.error statistic p.value
##   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;
## 1 (Intercept)    3.85    12.3        0.313  0.755 
## 2 height        21.1      8.06       2.62   0.0112
## 3 weight        -0.139    0.0685    -2.03   0.0474
## 4 age            0.211    0.0979     2.16   0.0350&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;interaction-terms&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;interaction terms&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lm_fit_with_interaction &amp;lt;- linear_reg() %&amp;gt;% 
  set_engine(&amp;quot;lm&amp;quot;) %&amp;gt;%
  fit(pace ~ height + weight + age + height:weight + height:age + weight:age +
        height:weight:age,
      data = df)
lm_fit_with_interaction&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## parsnip model object
## 
## Fit time:  0ms 
## 
## Call:
## stats::lm(formula = formula, data = data)
## 
## Coefficients:
##       (Intercept)             height             weight                age  
##          924.8499          -444.1560           -15.6339           -27.8628  
##     height:weight         height:age         weight:age  height:weight:age  
##            7.9297            13.9352             0.4802            -0.2425&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tidy(lm_fit_with_interaction)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 8 x 5
##   term              estimate std.error statistic p.value
##   &amp;lt;chr&amp;gt;                &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;
## 1 (Intercept)        925.     2272.        0.407   0.686
## 2 height            -444.     1287.       -0.345   0.731
## 3 weight             -15.6      32.8      -0.477   0.635
## 4 age                -27.9      80.3      -0.347   0.730
## 5 height:weight        7.93     18.5       0.428   0.670
## 6 height:age          13.9      45.5       0.306   0.761
## 7 weight:age           0.480     1.16      0.414   0.680
## 8 height:weight:age   -0.243     0.656    -0.370   0.713&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;predictions&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Predictions&lt;/h1&gt;
&lt;div id=&#34;new-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;new data&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;SpongeBob is a 26-year-old, 1.77 m tall bicyclist who weighs 55 kg&lt;/li&gt;
&lt;li&gt;Patrick is a 25-year-old, 1.81 m tall bicyclist who weighs 75 kg&lt;/li&gt;
&lt;li&gt;Squidward is a 31-year-old, 1.89 m tall bicyclist who weighs 65 kg&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;new_contestants &amp;lt;- data.frame(name = c(&amp;quot;SpongeBob&amp;quot;, &amp;quot;Patrick&amp;quot;, &amp;quot;Squidward&amp;quot;),
                              age = c(26, 25, 31),
                              height = c(1.77, 1.81, 1.89),
                              weight = c(55, 75, 65))

mean_predictions &amp;lt;- predict(lm_fit, new_data = new_contestants)
mean_predictions&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 3 x 1
##   .pred
##   &amp;lt;dbl&amp;gt;
## 1  39.1
## 2  36.9
## 3  41.3&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;confidence-intervals&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;confidence intervals&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;CI_predictions &amp;lt;- predict(lm_fit,
                          new_data = new_contestants,
                          type = &amp;quot;conf_int&amp;quot;)
CI_predictions&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 3 x 2
##   .pred_lower .pred_upper
##         &amp;lt;dbl&amp;gt;       &amp;lt;dbl&amp;gt;
## 1        37.1        41.0
## 2        35.9        38.0
## 3        39.0        43.5&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;error-bars&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;error bars&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot_df &amp;lt;- new_contestants %&amp;gt;%
  bind_cols(mean_predictions) %&amp;gt;%
  bind_cols(CI_predictions)
plot_df&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##        name age height weight    .pred .pred_lower .pred_upper
## 1 SpongeBob  26   1.77     55 39.05386    37.07966    41.02807
## 2   Patrick  25   1.81     75 36.91179    35.85758    37.96601
## 3 Squidward  31   1.89     65 41.25491    38.97189    43.53794&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot_df %&amp;gt;%
  ggplot(aes(x = name)) +
  geom_errorbar(aes(ymin = .pred_lower,
                    ymax = .pred_upper),
                color = &amp;quot;red&amp;quot;,
                width = 0.32) +
  geom_point(aes(y = .pred), color = &amp;quot;blue&amp;quot;, size = 5) +
  labs(title = &amp;quot;Tour de Under the Sea&amp;quot;,
       subtitle = &amp;quot;Welcome the new contestants!&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;,
       x = &amp;quot;&amp;quot;,
       y = &amp;quot;pace (km/hr)&amp;quot;) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-01-introduction-to-machine-learning_files/figure-html/unnamed-chunk-18-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;data-splitting&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data Splitting&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;“The &lt;em&gt;training set&lt;/em&gt; is used to estimate parameters, compare models and feature engineering techniques, tune models, etc.”&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“The &lt;em&gt;test set&lt;/em&gt; is held in reserve until the end of the project, at which point there should only be one or two models under serious consideration. It is used as an unbiased source for measuring final model performance.”&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_split &amp;lt;- initial_split(df)
train_df &amp;lt;- training(data_split)
test_df &amp;lt;- testing(data_split)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;print(paste(&amp;quot;The number of observations in the training set is:&amp;quot;, nrow(train_df)))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;The number of observations in the training set is: 47&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;print(paste(&amp;quot;The number of observations in the testing set is:&amp;quot;, nrow(test_df)))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;The number of observations in the testing set is: 15&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;visualizing-the-split&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;visualizing the split&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_split &amp;lt;- initial_split(df)
train_df &amp;lt;- training(data_split)
test_df &amp;lt;- testing(data_split)

train_df %&amp;gt;%
  ggplot(aes(x = height, y = pace)) +
  geom_point(aes(color = &amp;quot;training set&amp;quot;), 
             # color = &amp;quot;black&amp;quot;
             ) +
  geom_smooth(method = &amp;quot;lm&amp;quot;,
              aes(x = height, y = pace),
              color = &amp;quot;black&amp;quot;,
              data = train_df,
               se = FALSE) +
  geom_point(aes(x = height, y = pace, color = &amp;quot;testing set&amp;quot;),
             # color = &amp;quot;red&amp;quot;,
             data = test_df,
             size = 3) +
  labs(title = &amp;quot;Training and Testing Sets&amp;quot;,
       subtitle = &amp;quot;approx 75-25 percent split&amp;quot;,
       caption = &amp;quot;Math 32&amp;quot;,
       x = &amp;quot;height (meters)&amp;quot;,
       y = &amp;quot;pace (km/hr)&amp;quot;) +
  scale_color_manual(name = &amp;quot;Data Split&amp;quot;,
                     breaks = c(&amp;quot;training set&amp;quot;, &amp;quot;testing set&amp;quot;),
                     values = c(&amp;quot;training set&amp;quot; = &amp;quot;black&amp;quot;,
                                &amp;quot;testing set&amp;quot; = &amp;quot;red&amp;quot;)) +
  theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-01-introduction-to-machine-learning_files/figure-html/unnamed-chunk-21-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Tip: run the last code block several times (keyboard shortcut: CTRL-SHFT-ENTER) for the full effect!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Introduction to Bioconductor</title>
      <link>/post/introduction-to-bioconductor/</link>
      <pubDate>Wed, 12 Feb 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/introduction-to-bioconductor/</guid>
      <description>&lt;p&gt;“&lt;a href=&#34;https://www.bioconductor.org/&#34;&gt;Bioconductor&lt;/a&gt; provides tools for the analysis and comprehension of high-throughput genomic data. Bioconductor uses the R statistical programming language, and is open source and open development.”&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.bioconductor.org/&#34;&gt;https://www.bioconductor.org/&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(&amp;quot;dplyr&amp;quot;)
library(&amp;quot;ggplot2&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;installation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Installation&lt;/h1&gt;
&lt;p&gt;To install core packages, type the following in an R command window.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This may take around 5 minutes&lt;/li&gt;
&lt;li&gt;When the option for updating packages appears, type in “a” for “all”&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#leave as eval = FALSE when knitting

if (!requireNamespace(&amp;quot;BiocManager&amp;quot;, quietly = TRUE))
    install.packages(&amp;quot;BiocManager&amp;quot;)
BiocManager::install()&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;installing-bioconductor-packages&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Installing Bioconductor packages&lt;/h2&gt;
&lt;p&gt;There are about 20000 packages in the &lt;em&gt;Bioconductor&lt;/em&gt; universe. For now, let us install a couple of the more popular packages with the following code. To install a &lt;code&gt;BioConductor&lt;/code&gt; package, simply type in the name of the package in quotes inside of &lt;code&gt;BiocManager::install()&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This may take around 5 minutes&lt;/li&gt;
&lt;li&gt;Hereafter, when the option for updating packages appears, type in “n” for “no”&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#leave as eval = FALSE when knitting

BiocManager::install(&amp;quot;GenomicFeatures&amp;quot;)
BiocManager::install(&amp;quot;Biostrings&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;exploring-genomicfeatures&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Exploring GenomicFeatures&lt;/h1&gt;
&lt;p&gt;The following instructions were extracted from the vignette for Genomic Features&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;browseVignettes(package = &#34;GenomicFeatures&#34;)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Load the &lt;code&gt;GenomicFeatures&lt;/code&gt; package. It is suggested that you load the packages with the following code.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#set as eval = TRUE when knitting

suppressPackageStartupMessages(library(&amp;#39;GenomicFeatures&amp;#39;))&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;“The &lt;code&gt;GenomicFeatures&lt;/code&gt; package retrieves and manages transcript-related features fromthe UCSC Genome Bioinformatics and BioMart data resources. The package isuseful for ChIP-chip, ChIP-seq, and RNA-seq analyses.”&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;txdb-objects&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;TxDb Objects&lt;/h2&gt;
&lt;p&gt;&#34;The &lt;code&gt;GenomicFeatures&lt;/code&gt; package uses TxDb objects to store transcript metadata. This class maps the 5’ and 3’ untranslated regions (UTRs), protein coding sequences(CDSs) and exons for a set of mRNA transcripts to their associated genome. TxDb objects have numerous accessors functions to allow such features to be retrieved individually or grouped together in a way that reflects the underlying biology.&lt;/p&gt;
&lt;p&gt;All TxDb objects are backed by a SQLite database that manages genomic locations and the relationships between pre-processed mRNA transcripts, exons, protein coding sequences, and their related gene identifiers.&#34;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#set as eval = TRUE when knitting

samplefile &amp;lt;- system.file(&amp;quot;extdata&amp;quot;,
                          &amp;quot;hg19_knownGene_sample.sqlite&amp;quot;,
                          package=&amp;quot;GenomicFeatures&amp;quot;)
txdb &amp;lt;- loadDb(samplefile)
txdb&lt;/code&gt;&lt;/pre&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Write a couple of sentences about what you observe in the output (the description of the txdb sample file)&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id=&#34;loading-and-viewing-a-sequence&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Loading and Viewing a Sequence&lt;/h2&gt;
&lt;ol start=&#34;2&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Install the following packages (i.e. figure out how from some code earlier in this tutorial)&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;BSgenome.Hsapiens.UCSC.hg19&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;TxDb.Hsapiens.UCSC.hg19.knownGene&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Run the following code and then write a couple of sentences about what you observe in the output.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#set as eval = TRUE when knitting

library(BSgenome.Hsapiens.UCSC.hg19)
library(TxDb.Hsapiens.UCSC.hg19.knownGene)

tx_seqs1 &amp;lt;- extractTranscriptSeqs(Hsapiens,
                                  TxDb.Hsapiens.UCSC.hg19.knownGene,
                                  use.names=TRUE)
suppressWarnings(translate(tx_seqs1))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;exploring-biostrings&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Exploring Biostrings&lt;/h1&gt;
&lt;p&gt;The following instructions were extracted from the vignette for &lt;code&gt;Biostrings&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;browseVignettes(package = &#34;Biostrings&#34;)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;4&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Install the following packages (i.e. figure out how from some code earlier in this tutorial)&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;hgu95av2probe&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hgu95av2cdf&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Load the &lt;code&gt;Biostrings&lt;/code&gt; package. It is suggested that you load the packages with the following code.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#set as eval = TRUE when knitting

suppressPackageStartupMessages(library(&amp;#39;Biostrings&amp;#39;))
suppressPackageStartupMessages(library(&amp;#39;hgu95av2probe&amp;#39;))
suppressPackageStartupMessages(library(&amp;#39;hgu95av2cdf&amp;#39;))&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;5&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;The following code will load an example of a “Large DNAStringSet” and perform a couple of simple data analyses. Run the code and write a couple of sentences about the results.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#set as eval = TRUE when knitting

this_DNAString_set &amp;lt;- DNAStringSet(hgu95av2probe)
this_DNAString_set_bc &amp;lt;- alphabetFrequency(this_DNAString_set, baseOnly = TRUE)
nrow(this_DNAString_set_bc)
head(this_DNAString_set_bc)
alphabetFrequency(this_DNAString_set_bc, baseOnly=TRUE, collapse=TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;6&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;The following code will perform a calculation called the &lt;code&gt;GC content&lt;/code&gt; of a DNA sequence and graph the resulting amounts as a histogram. Run the code and write a couple of sentences about the results.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#set as eval = TRUE when knitting

this_DNAString_df &amp;lt;- data.frame(this_DNAString_set_bc)

# alas &amp;quot;T&amp;quot; is treated as &amp;quot;TRUE&amp;quot; in R, so let&amp;#39;s use the full names of the nucleotides
colnames(this_DNAString_df) &amp;lt;- c(&amp;quot;Adenine&amp;quot;, &amp;quot;Cytosine&amp;quot;, &amp;quot;Guanine&amp;quot;, &amp;quot;Thymine&amp;quot;, &amp;quot;other&amp;quot;)

this_DNAString_df %&amp;gt;%
  select(c(&amp;quot;Adenine&amp;quot;, &amp;quot;Cytosine&amp;quot;, &amp;quot;Guanine&amp;quot;, &amp;quot;Thymine&amp;quot;)) %&amp;gt;%
  mutate(GC_content = 100*(Cytosine + Guanine) / 
           (Adenine + Cytosine + Guanine + Thymine)) %&amp;gt;%
  ggplot(aes(x = GC_content, fill = ..x..)) +
  geom_histogram(binwidth = 5) + 
  labs(title = &amp;quot;Affymetrix Human Genome U95 Set annotation data&amp;quot;,
       subtitle = &amp;quot;GC Content of hgu95av2probe&amp;quot;,
       caption = &amp;quot;Source: Bioconductor&amp;quot;,
       x = &amp;quot;GC content (percentage)&amp;quot;) +
  scale_fill_gradient(low = &amp;quot;yellow&amp;quot;, high= &amp;quot;blue&amp;quot;) +
  theme_minimal() +
  theme(legend.position = &amp;quot;none&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Troubleshooting for R, RStudio, and Tidyverse installation</title>
      <link>/post/r-troubleshooting-for-students/</link>
      <pubDate>Wed, 29 Jan 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/r-troubleshooting-for-students/</guid>
      <description>&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#why-doesnt-my-r-look-like-your-r-software&#34;&gt;Why doesn’t my R look like your R [software]?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#rstudio-says-that-it-cannot-find-the-r-binaries.&#34;&gt;RStudio says that it cannot find the R binaries.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#we-cannot-install-software-on-ipad-chromebook-etc.&#34;&gt;We cannot install software (on iPad, Chromebook, etc.)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#tidyverse-cannot-be-found&#34;&gt;tidyverse cannot be found&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#package-is-not-available-for-r-version&#34;&gt;[package] is not available for R version …&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#there-is-no-package-rlang&#34;&gt;there is no package ‘rlang’&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#there-is-no-package-broom&#34;&gt;there is no package ‘broom’&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#rlang-andor-broom-still-do-not-work&#34;&gt;rlang and/or broom still do not work&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#how-do-we-know-which-is-the-rmd-file-and-which-is-the-html-file&#34;&gt;How do we know which is the RMD file and which is the HTML file?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;p&gt;In this site, I hope to address most of the issues that appear when we try to install &lt;code&gt;R&lt;/code&gt;, &lt;code&gt;RStudio&lt;/code&gt;, and &lt;code&gt;tidyverse&lt;/code&gt; in the classroom setting.&lt;/p&gt;
&lt;div id=&#34;why-doesnt-my-r-look-like-your-r-software&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Why doesn’t my R look like your R [software]?&lt;/h1&gt;
&lt;p&gt;There are two programs to install: &lt;code&gt;R&lt;/code&gt;, then &lt;code&gt;RStudio&lt;/code&gt;. Please follow the installation instructions at &lt;a href=&#34;https://dsollberger.netlify.com/post/r-installation-for-students/&#34; class=&#34;uri&#34;&gt;https://dsollberger.netlify.com/post/r-installation-for-students/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;rstudio-says-that-it-cannot-find-the-r-binaries.&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;RStudio says that it cannot find the R binaries.&lt;/h1&gt;
&lt;p&gt;There are two programs to install: &lt;code&gt;R&lt;/code&gt;, then &lt;code&gt;RStudio&lt;/code&gt;. Please follow the installation instructions at &lt;a href=&#34;https://dsollberger.netlify.com/post/r-installation-for-students/&#34; class=&#34;uri&#34;&gt;https://dsollberger.netlify.com/post/r-installation-for-students/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;we-cannot-install-software-on-ipad-chromebook-etc.&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;We cannot install software (on iPad, Chromebook, etc.)&lt;/h1&gt;
&lt;p&gt;There is a fantastic alternative at &lt;a href=&#34;https://rstudio.cloud/&#34;&gt;RStudio Cloud&lt;/a&gt;. That is, one can do their R programming online. There will be a few more steps involved compared to what we do in &lt;code&gt;RStudio&lt;/code&gt; Desktop, but past students have gotten &lt;code&gt;RStudio Cloud&lt;/code&gt; to work.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;tidyverse-cannot-be-found&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;tidyverse cannot be found&lt;/h1&gt;
&lt;p&gt;We need to install code packages before using code packages. Run &lt;code&gt;install.packages(&#34;tidyverse&#34;)&lt;/code&gt; in the console (lower-left area). The installation will take up to 5 minutes. This has to be done only once during the semester.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;package-is-not-available-for-r-version&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;[package] is not available for R version …&lt;/h1&gt;
&lt;p&gt;To ensure compatibility between &lt;code&gt;R&lt;/code&gt; and code packages, the R community almost always asks users to use the newest version of &lt;code&gt;R&lt;/code&gt;. Please install the newest versions of &lt;code&gt;R&lt;/code&gt; and &lt;code&gt;RStudio&lt;/code&gt;. This semester we are using &lt;code&gt;R&lt;/code&gt; version 3.6.2 and &lt;code&gt;RStudio&lt;/code&gt; version 1.2.5033.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;there-is-no-package-rlang&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;there is no package ‘rlang’&lt;/h1&gt;
&lt;p&gt;Run this command in the console&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;install.packages(&#34;dplyr&#34;)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If a choice appears that says something like &lt;code&gt;Do you want to install from sources the package which needs compilation?.&lt;/code&gt;, select “No”.&lt;/p&gt;
&lt;p&gt;Alternatively: &lt;a href=&#34;https://stackoverflow.com/questions/49721356/trouble-downloading-rlang-with-tidyverse&#34; class=&#34;uri&#34;&gt;https://stackoverflow.com/questions/49721356/trouble-downloading-rlang-with-tidyverse&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;there-is-no-package-broom&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;there is no package ‘broom’&lt;/h1&gt;
&lt;p&gt;The explanation would be a deep dive into the notion of &lt;em&gt;dependencies&lt;/em&gt; (beyond the scope of the course). For now, we dive right into this case’s dependencies. Run these commands in the console.&lt;/p&gt;
&lt;p&gt;If a choice appears that says something like &lt;code&gt;Do you want to install from sources the package which needs compilation?.&lt;/code&gt;, select “No”.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;install.packages(&#34;backports&#34;)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;then &lt;code&gt;install.packages(&#34;zeallot&#34;)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;then &lt;code&gt;install.packages(&#34;broom&#34;)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;then &lt;code&gt;install.packages(&#34;tidyverse&#34;)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://community.rstudio.com/t/fail-to-install-package-broom/11307/3&#34; class=&#34;uri&#34;&gt;https://community.rstudio.com/t/fail-to-install-package-broom/11307/3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://community.rstudio.com/t/error-lazy-loading-failed-for-package-broom/50777&#34; class=&#34;uri&#34;&gt;https://community.rstudio.com/t/error-lazy-loading-failed-for-package-broom/50777&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;rlang-andor-broom-still-do-not-work&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;rlang and/or broom still do not work&lt;/h1&gt;
&lt;p&gt;Let’s try this. &lt;code&gt;tidyverse&lt;/code&gt; is a &lt;em&gt;set&lt;/em&gt; of packages that are supposed to work together well and emulate programming practices from other programming languages. In our introductory forays into &lt;code&gt;R&lt;/code&gt; programming, we do not need every package in the &lt;code&gt;tidyverse&lt;/code&gt;. Therefore, the simplest work-around is to load the needed packages individually.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#### instead of library(&amp;quot;tidyverse&amp;quot;) ####
library(&amp;quot;dplyr&amp;quot;)    #for the pipe function %&amp;gt;% and other SQL commands
library(&amp;quot;ggplot2&amp;quot;)  #modern data visualization
#library(&amp;quot;readr&amp;quot;)    #to load CSV data files
#library(&amp;quot;readxl&amp;quot;)   #to load Excel data files
#library(&amp;quot;stringr&amp;quot;)  #manipulate strings and regular expressions
#library(&amp;quot;tidyr&amp;quot;)    #to reshape data frames with functions like gather or spread&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;how-do-we-know-which-is-the-rmd-file-and-which-is-the-html-file&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;How do we know which is the RMD file and which is the HTML file?&lt;/h1&gt;
&lt;p&gt;It will be useful if you can see file types in your computer.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;instructions for &lt;a href=&#34;http://kb.winzip.com/kb/entry/26/&#34;&gt;Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;instructions for &lt;a href=&#34;https://www.idownloadblog.com/2014/10/29/how-to-show-or-hide-filename-extensions-in-os-x-yosemite/&#34;&gt;Mac OS X&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Also, the HTML file will probably have a similar icon as your web browser (Chrome, Firefox, etc.)&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R Installation</title>
      <link>/post/r-installation-for-students/</link>
      <pubDate>Sun, 19 Jan 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/r-installation-for-students/</guid>
      <description>&lt;p&gt;If you are planning to do the &lt;code&gt;R&lt;/code&gt; assignments on your own computer (recommended), then here is a quick outline for obtaining the software.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;There are two separate software programs&lt;/em&gt;. Most people find it easier to use &lt;code&gt;RStudio&lt;/code&gt;. than just &lt;code&gt;R&lt;/code&gt;, but you need to install &lt;code&gt;R&lt;/code&gt; first before installing &lt;code&gt;RStudio&lt;/code&gt; (analogously speaking: you need an cell phone before you can use an cell phone case).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;If you have R and RStudio from a previous course, you still need to update to the current versions!&lt;/em&gt; (version 3.6.2 of R and version 1.2.5033 of RStudio)&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;downloading-r&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Downloading R&lt;/h1&gt;
&lt;p&gt;Go to &lt;a href=&#34;https://cran.r-project.org/&#34;&gt;The Comprehensive R Archive Network&lt;/a&gt; (CRAN)&lt;/p&gt;
&lt;p&gt;Windows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;click “Download R for Windows”&lt;/li&gt;
&lt;li&gt;click “install R for the first time”&lt;/li&gt;
&lt;li&gt;click “Download R 3.6.2 for Windows”&lt;/li&gt;
&lt;li&gt;click “Save File”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mac:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;click “Download R for (Mac) OS X”&lt;/li&gt;
&lt;li&gt;click “R-3.6.2.pkg”&lt;/li&gt;
&lt;li&gt;click “Ok”&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;installing-r&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Installing R&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Windows: double-check icon for R-3.6.2-win.exe&lt;/li&gt;
&lt;li&gt;Mac: double-click icon for R-3.6.2.pkg&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For the rest of these steps, it is okay to accept the default selections (but I will outline them here for posterity):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;give computer permission to install&lt;/li&gt;
&lt;li&gt;select language&lt;/li&gt;
&lt;li&gt;agree to GNU General Public License&lt;/li&gt;
&lt;li&gt;select destination location&lt;/li&gt;
&lt;li&gt;select components&lt;/li&gt;
&lt;li&gt;Startup options: select “No (accept defaults)”&lt;/li&gt;
&lt;li&gt;select Start Menu Folder&lt;/li&gt;
&lt;li&gt;select Additional Tasks&lt;/li&gt;
&lt;li&gt;(wait a minute or two for installation to take place)&lt;/li&gt;
&lt;li&gt;“Click Finish to exit Setup”&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;downloading-rstudio&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Downloading RStudio&lt;/h1&gt;
&lt;p&gt;Go to the &lt;a href=&#34;https://rstudio.com/products/rstudio/download/#download&#34;&gt;RStudio Desktop download page&lt;/a&gt; (i.e. we are using the &lt;em&gt;free&lt;/em&gt;, desktop version of RStudio)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Windows: click RStudio-1.2.5033.exe, click “Save File”&lt;/li&gt;
&lt;li&gt;Mac: click RStudio-1.2.5033.dmg, click “Ok”&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;installing-rstudio&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Installing RStudio&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Windows: double-check icon for RStudio-1.2.5033.exe&lt;/li&gt;
&lt;li&gt;Mac: double-click icon for RStudio-1.2.5033.dmg&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For the rest of these steps, it is okay to accept the default selections (but I will outline them here for posterity):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;give computer permission to install&lt;/li&gt;
&lt;li&gt;“Click Next to continue”&lt;/li&gt;
&lt;li&gt;Choose Install Location&lt;/li&gt;
&lt;li&gt;Choose Start Menu Folder&lt;/li&gt;
&lt;li&gt;(wait a minute or two for installation to take place)&lt;/li&gt;
&lt;li&gt;“Click Finish to close Setup”&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;code-packages&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Code Packages&lt;/h1&gt;
&lt;p&gt;For R coding, we will often need more code—called code packages. To ease our coding sessions, please run the following lines of code before class (in the lower-left &lt;code&gt;console&lt;/code&gt; area of RStudio, just has to be done once this semester).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;package_list &amp;lt;- c(&amp;quot;tidyverse&amp;quot;, &amp;quot;readxl&amp;quot;, &amp;quot;mosaic&amp;quot;, &amp;quot;titanic&amp;quot;)
install.packages(package_list)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;file-types&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;File Types&lt;/h1&gt;
&lt;p&gt;Also, while we are learning how I want homework assignments to be submitted, it will be useful if you can see file types in your computer.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;instructions for &lt;a href=&#34;http://kb.winzip.com/kb/entry/26/&#34;&gt;Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;instructions for &lt;a href=&#34;https://www.idownloadblog.com/2014/10/29/how-to-show-or-hide-filename-extensions-in-os-x-yosemite/&#34;&gt;Mac OS X&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Duolingo Leagues</title>
      <link>/post/duolingo-leagues/</link>
      <pubDate>Mon, 13 Jan 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/duolingo-leagues/</guid>
      <description>&lt;p&gt;&lt;code&gt;Duolingo&lt;/code&gt;, the language learning app, places users in groups of 50 and assigns a &lt;code&gt;league&lt;/code&gt; to each user to encourage competition. The leagues are&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Bronze, Silver, Gold, Sapphire, Ruby, Emerald, Amethyst, Pearl, Obsidian, and Diamond (in that increasing order)&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;what-proportion-of-duolingo-users-are-in-each-league&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;What proportion of Duolingo users are in each league?&lt;/h1&gt;
&lt;p&gt;The rules are&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;everyone starts in the Bronze League&lt;/li&gt;
&lt;li&gt;the top 15 percent of each group gets promoted to the next league up (measured weekly)&lt;/li&gt;
&lt;li&gt;the bottom 10 percent of each group is related downward&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In this post, I will try out some stochastic processes calculations to answer that question.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;leagues &amp;lt;- c(&amp;quot;Bronze&amp;quot;, &amp;quot;Silver&amp;quot;, &amp;quot;Gold&amp;quot;, &amp;quot;Sapphire&amp;quot;, &amp;quot;Ruby&amp;quot;,
             &amp;quot;Emerald&amp;quot;, &amp;quot;Amethyst&amp;quot;, &amp;quot;Pearl&amp;quot;, &amp;quot;Obsidian&amp;quot;, &amp;quot;Diamond&amp;quot;)

transition_matrix &amp;lt;- matrix( rep(0, 100), 10)

# trying shortcuts
diag(transition_matrix[-10,-1]) &amp;lt;- 15 #top 15 percent of each group gets promoted
diag(transition_matrix[-1,-10]) &amp;lt;- 10 #bottom 10 percent of each group is relegated
diag(transition_matrix)         &amp;lt;- 75 #the rest stay where they are

# fix the corners
transition_matrix[1,1]    &amp;lt;- 85
transition_matrix[10, 10] &amp;lt;- 85

# make row-stochastic (i.e. so each row adds up to one)
transition_matrix &amp;lt;- transition_matrix/100

# R allows user to label rows and columns
rownames(transition_matrix) &amp;lt;- leagues
colnames(transition_matrix) &amp;lt;- leagues

print(transition_matrix)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##          Bronze Silver Gold Sapphire Ruby Emerald Amethyst Pearl Obsidian
## Bronze     0.85   0.15 0.00     0.00 0.00    0.00     0.00  0.00     0.00
## Silver     0.10   0.75 0.15     0.00 0.00    0.00     0.00  0.00     0.00
## Gold       0.00   0.10 0.75     0.15 0.00    0.00     0.00  0.00     0.00
## Sapphire   0.00   0.00 0.10     0.75 0.15    0.00     0.00  0.00     0.00
## Ruby       0.00   0.00 0.00     0.10 0.75    0.15     0.00  0.00     0.00
## Emerald    0.00   0.00 0.00     0.00 0.10    0.75     0.15  0.00     0.00
## Amethyst   0.00   0.00 0.00     0.00 0.00    0.10     0.75  0.15     0.00
## Pearl      0.00   0.00 0.00     0.00 0.00    0.00     0.10  0.75     0.15
## Obsidian   0.00   0.00 0.00     0.00 0.00    0.00     0.00  0.10     0.75
## Diamond    0.00   0.00 0.00     0.00 0.00    0.00     0.00  0.00     0.10
##          Diamond
## Bronze      0.00
## Silver      0.00
## Gold        0.00
## Sapphire    0.00
## Ruby        0.00
## Emerald     0.00
## Amethyst    0.00
## Pearl       0.00
## Obsidian    0.15
## Diamond     0.85&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Knowing some about stochastic processes, we can either implement an initial distribution and employ matrix-vector multiplication over many iterations, or we can find an eigenvector.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;findStatDist &amp;lt;- function(P){
  # This function will compute the stationary distribution for a transition matrix
  # Input: row-stochastic matrix P
  # Output: row vector pi_vec
  
  # obtain left-eigenvector for lambda = 1
  x &amp;lt;- eigen(t(P))$vectors[,1] 
  
  # normalize the eigenvector in the one-norm
  pi_vec &amp;lt;- x / sum(x)
  pi_vec #return this vector
}

answer &amp;lt;- as.data.frame(round(100*findStatDist(transition_matrix)))

# R allows user to label rows and columns
rownames(answer) &amp;lt;- leagues
colnames(answer) &amp;lt;- &amp;quot;percentage&amp;quot;

print(answer)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##          percentage
## Bronze            3
## Silver            4
## Gold              5
## Sapphire          7
## Ruby              9
## Emerald          11
## Amethyst         13
## Pearl            15
## Obsidian         16
## Diamond          17&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Hikes I&#39;ve Completed</title>
      <link>/post/hikes-i-ve-completed/</link>
      <pubDate>Sat, 11 Jan 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/hikes-i-ve-completed/</guid>
      <description>&lt;p&gt;Here I will plot some of the hikes I have done as elevation (from sea level) versus distance. I was inspired by &lt;a href=&#34;https://www.reddit.com/r/dataisbeautiful/comments/bwm184/my_first_attempt_at_data_visualization_hikes_ive/&#34;&gt;this Reddit post&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Today’s code was great practice with&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;geom_segment&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;geom_label_repel&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;and using &lt;code&gt;xlim&lt;/code&gt; and &lt;code&gt;ylim&lt;/code&gt; to expand the plot.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(ggrepel)
library(tidyverse)
library(readxl)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df_info &amp;lt;- read_excel(&amp;quot;hikes.xlsx&amp;quot;, sheet = &amp;quot;info&amp;quot;)
df_info %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 9 x 6
##   Region    trail                distance trailhead elevation  peak
##   &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;                   &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
## 1 Tahoe     Mt Tallac                 5.1      6445      3290  9735
## 2 Tahoe     Flume                     6.4      6980      1420  8400
## 3 Tahoe     Mt Rose                   5.4      8388      2388 10776
## 4 Tahoe     Relay Peak                4.7      8388      1515  9903
## 5 Tahoe     Donner Peak               1.9      6175       882  7057
## 6 Yosemite  Four-Mile                 4.7      4000      3200  7200
## 7 Yosemite  Nevada Falls              4.4      4000      2191  6191
## 8 Yosemite  Upper Yosemite Falls      3.6      4000      3175  7175
## 9 Mt Diablo Waterfall                 4         374      1709  2083&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df_info %&amp;gt;%
  mutate(start = 0) %&amp;gt;% #the first x-value for each line segment
  ggplot() +
  geom_segment(aes(x = start, y = trailhead, 
                   xend = distance, yend = peak, 
                   color = Region)) +
  geom_label_repel(aes(x = distance, y = peak, 
                       color = Region,
                       label = trail),
                   box.padding = 1,
                   segment.color = &amp;quot;grey50&amp;quot;,
                   segment.size = 0.5) +
  geom_point(aes(x = distance, y = peak, color = Region), size = 5) +
  labs(title = &amp;quot;Hikes I&amp;#39;ve Completed&amp;quot;,
       subtitle = &amp;quot;Derek Sollberger&amp;quot;,
       caption = &amp;quot;2010 to 2019&amp;quot;,
       x = &amp;quot;One-Way Distance (in miles)&amp;quot;,
       y = &amp;quot;Elevation (in feet)&amp;quot;) +
  theme_minimal() +
  xlim(0,8) +
  ylim(0, 15000)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-01-11-hikes-i-ve-completed_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
